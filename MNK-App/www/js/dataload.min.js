var SapData={CallDataService:function(e,t){var a=new XMLHttpRequest;a.open("GET",e,!0),console.log(e+"::"+storeObject.auth+"::"+storeObject.oDataTimeOut),a.setRequestHeader("Authorization",storeObject.auth),a.timeout=storeObject.oDataTimeOut,a.onreadystatechange=function(){4==a.readyState&&(200==a.status?t(a.responseXML,!0):501!=a.status&&500!=a.status&&404!=a.status&&403!=a.status&&400!=a.status&&0!=a.status||t(a.responseXML,!1))},a.send()},CheckLogin:function(e,t,a){var n=oLogin+"(IPassword='"+encodeURIComponent(t)+"',IUser='"+encodeURIComponent(e)+"')";SapData.CallDataService(n,function(t,n){n?"Login Success"==t.getElementsByTagName("d:EMessage")[0].textContent?(console.log("LOGIN SUCCESS"),localStorage.setItem("UserId",e),a("Success")):(console.log("LOGIN FAILED"),localStorage.removeItem("UserId",e),a("Failure")):SapData.NetworkError()})},loadRoutePlan:function(e,t){var a=[];SapData.CallDataService(oRoutePlan+"'"+e+"'",function(n,o){if(o){var r=n.getElementsByTagName("entry");"NO_ROUTE_ASSIGNED"!=r[0].getElementsByTagName("d:MESSAGE")[0].textContent?IKMobileDB.db.transaction(function(n){for(var o="INSERT OR IGNORE INTO RoutePlan ( RoutePlanId, RoutePlan, UserId, IsCompleted, flag) VALUES (?, ?, ?, ?, ?)",l=0;l<r.length;l++){var s=[r[l].getElementsByTagName("d:ROUTEPLAN")[0].textContent,r[l].getElementsByTagName("d:ROUTEPLAN")[0].textContent,r[l].getElementsByTagName("d:USER")[0].textContent,r[l].getElementsByTagName("d:STATUS")[0].textContent,""];n.executeSql(o,s),a[l]=r[l].getElementsByTagName("d:ROUTEPLAN")[0].textContent}var d="Update RoutePlan set newlyAdded='Yes' where flag='' and RoutePlanId NOT IN (Select RoutePlanId from RoutePlanBackup)";n.executeSql(d,[],function(){},function(){}),console.log("Data Inserted into RoutePlan Table");for(var i=0;i<a.length;i++)i==a.length-1?SapData.loadRouteDetails(e,a[i],"1",function(e){SapData.loadDeliveryPickup(e,"1",function(e){SapData.loadInventory(e,"1",t)})}):SapData.loadRouteDetails(e,a[i],"0",function(e){SapData.loadDeliveryPickup(e,"0",function(e){SapData.loadInventory(e,"0",t)})})}):($("#loginpopup").popup("close"),setTimeout(function(){$("#popupOverlayNoRoutePlanAssigned").popup("open")},500),setTimeout(function(){$("#popupOverlayNoRoutePlanAssigned").popup("close")},2500),localStorage.removeItem("UserId"))}})},loadRouteDetails:function(e,t,a,n){var o=oRouteDetails+"'"+e+"' and ROUTEPLAN eq '"+t+"'";SapData.CallDataService(o,function(e,o){if(o){var r=e.getElementsByTagName("entry")[0].getElementsByTagName("entry");IKMobileDB.db.transaction(function(o){var l="INSERT OR IGNORE INTO RouteDetails ( IndexId, RoutePlanId, RouteId, RoutePlan_Line, Route, Location, Name, City, State, OrderNo, PlannedArrival, PlannedDeparture, Arrival, Departure,flag) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",s=[0,t,t+"_0",r[0].getElementsByTagName("d:ROUTEPLAN_LINE")[0].textContent,r[0].getElementsByTagName("d:STOPDESC")[0].textContent,r[0].getElementsByTagName("d:LOCATION")[0].textContent,r[0].getElementsByTagName("d:LOCATION_DESC")[0].textContent,r[0].getElementsByTagName("d:CITY")[0].textContent,r[0].getElementsByTagName("d:REGION")[0].textContent,r[0].getElementsByTagName("d:ORDER")[0].textContent,"-",dateFormat(r[0].getElementsByTagName("d:SCHDEP")[0].textContent),"","",""];o.executeSql(l,s);for(var d=1;d<r.length;d++){var s=[d,t,t+"_"+d,r[d].getElementsByTagName("d:ROUTEPLAN_LINE")[0].textContent,r[d].getElementsByTagName("d:STOPDESC")[0].textContent,r[d].getElementsByTagName("d:LOCATION")[0].textContent,r[d].getElementsByTagName("d:LOCATION_DESC")[0].textContent,r[d].getElementsByTagName("d:CITY")[0].textContent,r[d].getElementsByTagName("d:REGION")[0].textContent,r[d].getElementsByTagName("d:ORDER")[0].textContent,dateFormat(r[d].getElementsByTagName("d:SCHARV")[0].textContent),dateFormat(r[d].getElementsByTagName("d:SCHDEP")[0].textContent),"","",""];o.executeSql(l,s)}var s=[r.length,t,t+"_"+r.length,r[0].getElementsByTagName("d:ROUTEPLAN_LINE")[0].textContent,r[0].getElementsByTagName("d:STOPDESC")[0].textContent,r[0].getElementsByTagName("d:LOCATION")[0].textContent,r[0].getElementsByTagName("d:LOCATION_DESC")[0].textContent,r[0].getElementsByTagName("d:CITY")[0].textContent,r[0].getElementsByTagName("d:REGION")[0].textContent,r[0].getElementsByTagName("d:ORDER")[0].textContent,dateFormat(r[0].getElementsByTagName("d:SCHARV")[0].textContent),"-","","",""];o.executeSql(l,s);var i="UPDATE RoutePlan set RouteName=?, Comments=?, DriverName=?, TruckMobile=? where RoutePlanId=?",u=e.getElementsByTagName("d:COMMENTS")[0].textContent.split("<>").join("<br>");if(o.executeSql(i,[e.getElementsByTagName("d:ROUTEPLAN_TEXT")[0].textContent,u,e.getElementsByTagName("d:DRIVER")[0].textContent,e.getElementsByTagName("d:TELF")[0].textContent,t]),"1"==a){var c="update RouteDetails set newlyAdded='Yes' where flag='' and Location NOT IN (Select Location from RouteDetailsBackup) and RoutePlanId NOT IN (Select RoutePlanId from RoutePlan where newlyAdded='Yes')";o.executeSql(c,[],function(){},function(){}),console.log("Data Inserted into RouteDetails Table"),console.log("RoutePlan Table Updated"),IKMobileDB.baseDataSyncLog("RoutePlan"),IKMobileDB.baseDataSyncLog("RouteDetails")}n(t)})}else"1"==a&&(IKMobileDB.db.transaction(function(e){var t="update RouteDetails set newlyAdded='Yes' where flag='' and Location NOT IN (Select Location from RouteDetailsBackup) and RoutePlanId NOT IN (Select RoutePlanId from RoutePlan where newlyAdded='Yes')";e.executeSql(t,[],function(){},function(){})}),console.log("Data Inserted into RouteDetails Table"),console.log("RoutePlan Table Updated"),IKMobileDB.baseDataSyncLog("RoutePlan"),IKMobileDB.baseDataSyncLog("RouteDetails")),n(t)})},loadDeliveryPickup:function(e,t,a){var n=oDeliveryPickup+"'"+e+"'&$expand=Stopitm";SapData.CallDataService(n,function(n,o){if(o){var r=n.getElementsByTagName("feed")[0].getElementsByTagName("feed"),l=n.getElementsByTagName("feed")[0];IKMobileDB.db.transaction(function(n){for(var o="INSERT OR IGNORE INTO DeliveryPickup ( OrderNo, LineNo, ItemId, Item, Description, MaterialGrp, MaterialDesc, ExpectedQty, ConfirmedQty, Type, PickupComments) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",s="UPDATE RouteDetails set SpecialInstructions=? where RoutePlanId=? and OrderNo=? and flag=''",d=0;d<r.length;d++){for(var i=r[d].getElementsByTagName("entry"),u=0;u<i.length;u++){var c=[i[u].getElementsByTagName("d:ORDER")[0].textContent,i[u].getElementsByTagName("d:ITEM_NUM")[0].textContent,i[u].getElementsByTagName("d:ORDER")[0].textContent+"_"+u,i[u].getElementsByTagName("d:MATERIAL")[0].textContent,i[u].getElementsByTagName("d:MATDESC")[0].textContent,i[u].getElementsByTagName("d:MATGROUP")[0].textContent,i[u].getElementsByTagName("d:MATGRPDES")[0].textContent,i[u].getElementsByTagName("d:QUANTITY")[0].textContent,i[u].getElementsByTagName("d:CONF_QUAN")[0].textContent,i[u].getElementsByTagName("d:FLAG")[0].textContent,i[u].getElementsByTagName("d:SERIAL")[0].textContent];n.executeSql(o,c)}n.executeSql(s,[l.getElementsByTagName("d:DELV_TXT")[d].textContent+" "+l.getElementsByTagName("d:HDR_TXT")[d].textContent,e,i[0].getElementsByTagName("d:ORDER")[0].textContent])}var m="Update DeliveryPickup set newlyAdded='Yes' where flag is null and NOT EXISTS (select OrderNo,LineNo from DeliveryPickupBackup where DeliveryPickup.OrderNo=DeliveryPickupBackup.OrderNo and DeliveryPickup.LineNo=DeliveryPickupBackup.LineNo) and OrderNo NOT IN (Select RD.OrderNo from RouteDetails as RD join RoutePlan as RP on RD.RoutePlanId=RP.RoutePlanId where RP.newlyAdded='Yes' and RD.OrderNo!='')";n.executeSql(m,[],function(){var t="update RouteDetails set newlyAdded='Yes' where RoutePlanId='"+e+"' and OrderNo is not null and OrderNo IN (Select OrderNo from DeliveryPickup where newlyAdded='Yes' group by OrderNo)";n.executeSql(t,[],function(){},function(){})},function(){}),"1"==t&&(console.log("Data Inserted into DeliveryPickup Table"),IKMobileDB.baseDataSyncLog("DeliveryPickup")),a(e)})}else"1"==t&&(IKMobileDB.db.transaction(function(t){var a="Update DeliveryPickup set newlyAdded='Yes' where flag is null and NOT EXISTS (select OrderNo,LineNo from DeliveryPickupBackup where DeliveryPickup.OrderNo=DeliveryPickupBackup.OrderNo and DeliveryPickup.LineNo=DeliveryPickupBackup.LineNo) and OrderNo NOT IN (Select RD.OrderNo from RouteDetails as RD join RoutePlan as RP on RD.RoutePlanId=RP.RoutePlanId where RP.newlyAdded='Yes' and RD.OrderNo!='')";t.executeSql(a,[],function(){var a="update RouteDetails set newlyAdded='Yes' where RoutePlanId='"+e+"' and OrderNo is not null and OrderNo IN (Select OrderNo from DeliveryPickup where newlyAdded='Yes' group by OrderNo)";t.executeSql(a,[],function(){},function(){})},function(){})}),console.log("Data Inserted into DeliveryPickup Table"),IKMobileDB.baseDataSyncLog("DeliveryPickup")),a(e)})},loadInventory:function(e,t,a){var n=oInventory+"'"+e+"'";SapData.CallDataService(n,function(e,n){if(n){var o=e.getElementsByTagName("entry");IKMobileDB.db.transaction(function(e){for(var n="INSERT OR IGNORE INTO Inventory ( RoutePlanId, ItemId, Item, Description, CommitedQuantity, TotalQuantity, UOM, BatchNo, SerialNo, InventoryType, Location) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",r=0;r<o.length;r++){var l=[o[r].getElementsByTagName("d:ROUTEPLAN")[0].textContent,o[r].getElementsByTagName("d:ROUTEPLAN")[0].textContent+"_"+r,o[r].getElementsByTagName("d:MATERIAL")[0].textContent,o[r].getElementsByTagName("d:MATDESC")[0].textContent,o[r].getElementsByTagName("d:QUANTITY")[0].textContent,o[r].getElementsByTagName("d:CONF_QUAN")[0].textContent,o[r].getElementsByTagName("d:UOM")[0].textContent,o[r].getElementsByTagName("d:BATCH_NUM")[0].textContent,o[r].getElementsByTagName("d:SERIAL")[0].textContent,o[r].getElementsByTagName("d:FLAG")[0].textContent,o[r].getElementsByTagName("d:LOCATION")[0].textContent];e.executeSql(n,l)}"1"==t&&(console.log("Data Inserted into Inventory Table"),IKMobileDB.baseDataSyncLog("Inventory"),a())})}else"1"==t&&(console.log("Data Inserted into Inventory Table"),IKMobileDB.baseDataSyncLog("Inventory"),a())})},getCSRFToken:function(e){var t=new XMLHttpRequest;t.open("GET",oInTransfer,!0),t.setRequestHeader("Authorization",storeObject.auth),t.setRequestHeader("X-CSRF-Token","Fetch"),t.timeout=storeObject.oDataTimeOut,t.onreadystatechange=function(){if(4==t.readyState){var a=t.getResponseHeader("x-csrf-token");storeObject.CSRKey=a,console.log("found CSRf key :"+storeObject.CSRKey),e()}},t.send()},updateRoutePlanHeaderStatus:function(e,t,a){console.log("Started updateRoutePlanHeaderStatus"),SapData.getCSRFToken(function(){var n=new XMLHttpRequest;n.open("PUT",oUpdateRoutePlan+"('"+e[0].RoutePlanId+"')",!0),n.setRequestHeader("Content-Type","application/atom+xml"),n.setRequestHeader("Authorization",storeObject.auth),n.setRequestHeader("X-CSRF-Token",storeObject.CSRKey),n.setRequestHeader("Accept","application/atom+xml,application/atomsvc+xml,application/xml"),n.timeout=storeObject.oDataTimeOut,n.onreadystatechange=function(){4==n.readyState&&(200==n.status||201==n.status||204==n.status?(console.log("Route Plan Header Status Updated"),dbQueries.updateFlag("Update SyncDetails set HeaderStatusFlag='1' where RouteId='"+e[0].RouteId+"'"),a()):(console.log("End with Error updateRoutePlanHeaderStatus"),SapData.UpdateError(n.status+" : End with Error updateRoutePlanHeaderStatus")))};var o='<?xml version="1.0" encoding="utf-8"?><atom:entry xmlns:atom ="http://www.w3.org/2005/Atom" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" xml:base="'+oRoutePlanSrv+'"><atom:content type="application/xml"><m:properties><d:ROUTEPLAN>'+e[0].RoutePlanId+"</d:ROUTEPLAN><d:ROUTEPLAN_LINE></d:ROUTEPLAN_LINE><d:ROUTEPLAN_STAT>"+t+"</d:ROUTEPLAN_STAT><d:START_ODO>"+e[0].OdometerStartReading+"</d:START_ODO><d:END_ODO>"+(e[0].OdometerEndReading?e[0].OdometerEndReading:"0")+"</d:END_ODO><d:HEADER>X</d:HEADER></m:properties></atom:content></atom:entry>";n.send(o)})},updateRoutePlanLineStatus:function(e,t,a){console.log("Started updateRoutePlanLineStatus"),SapData.getCSRFToken(function(){var n=new XMLHttpRequest;n.open("PUT",oUpdateRoutePlan+"('"+e[0].RoutePlanId+"')",!0),n.setRequestHeader("Content-Type","application/atom+xml"),n.setRequestHeader("Authorization",storeObject.auth),n.setRequestHeader("X-CSRF-Token",storeObject.CSRKey),n.setRequestHeader("Accept","application/atom+xml,application/atomsvc+xml,application/xml"),n.timeout=storeObject.oDataTimeOut,n.onreadystatechange=function(){4==n.readyState&&(200==n.status||201==n.status||204==n.status?(console.log("Route Plan Line Status Updated"),dbQueries.updateFlag("Update SyncDetails set LineStatusFlag='1' where RouteId='"+e[0].RouteId+"'"),a()):(console.log("End with Error updateRoutePlanLineStatus"),SapData.UpdateError(n.status+" : End with Error updateRoutePlanLineStatus"),dbQueries.updateFlag("Update SyncDetails set LineStatusFlag='0' where RouteId='"+e[0].RouteId+"'")))};var o='<?xml version="1.0" encoding="UTF-8"?><atom:entry xmlns:atom="http://www.w3.org/2005/Atom" xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" xml:base="'+oRoutePlanSrv+'"><atom:content type="application/xml"><m:properties><d:ROUTEPLAN>'+e[0].RoutePlanId+"</d:ROUTEPLAN><d:ROUTEPLAN_LINE>"+e[0].RoutePlan_Line+"</d:ROUTEPLAN_LINE><d:ROUTEPLAN_STAT>"+t+"</d:ROUTEPLAN_STAT><d:HEADER /></m:properties></atom:content></atom:entry>";n.send(o)})},updateArrivalDeparture:function(e,t){console.log("Started updateArrivalDeparture"),SapData.getCSRFToken(function(){var a=new XMLHttpRequest;a.open("PUT",oUpdateArrivalDeparture+"(ROUTEPLAN='"+e[0].RoutePlanId+"',ROUTEPLAN_LINE='"+e[0].RoutePlan_Line+"')",!0),a.setRequestHeader("Content-Type","application/atom+xml"),a.setRequestHeader("Authorization",storeObject.auth),a.setRequestHeader("X-CSRF-Token",storeObject.CSRKey),a.setRequestHeader("Accept","application/atom+xml,application/atomsvc+xml,application/xml"),a.timeout=storeObject.oDataTimeOut,a.onreadystatechange=function(){4==a.readyState&&(console.log("Arrival/Departure Request Status:: "+a.status),200==a.status||201==a.status||204==a.status?(xmlDoc=a.responseXML,console.log("Arrival Departure Updated"),dbQueries.updateFlag("Update SyncDetails set ArrDepFlag='1' where RouteId='"+e[0].RouteId+"'"),t()):(console.log("End with Error updateArrivalDeparture"),SapData.UpdateError(a.status+" : End with Error updateArrivalDeparture"),dbQueries.updateFlag("Update SyncDetails set ArrDepFlag='0' where RouteId='"+e[0].RouteId+"'")))};var n='<?xml version="1.0" encoding="UTF-8"?><atom:entry xmlns:atom="http://www.w3.org/2005/Atom" xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" xml:base="'+oRoutePlanSrv+'"><atom:content type="application/atom+xml"><m:properties><d:ROUTEPLAN>'+e[0].RoutePlanId+"</d:ROUTEPLAN><d:ROUTEPLAN_LINE>"+e[0].RoutePlan_Line+"</d:ROUTEPLAN_LINE><d:DOCUMENT_NUMB /><d:ENTRY_NUMB></d:ENTRY_NUMB><d:CUSTOMER_NUMB>"+e[0].Location+"</d:CUSTOMER_NUMB><d:UPDTD>0</d:UPDTD><d:ACTARVDT>"+sendDate(e[0].Arrival)+"</d:ACTARVDT><d:ACTARVTM>"+sendTime(e[0].Arrival)+"</d:ACTARVTM><d:ACTDEPDT>"+sendDate(e[0].Departure)+"</d:ACTDEPDT><d:ACTDEPTM>"+sendTime(e[0].Departure)+"</d:ACTDEPTM><d:MESSAGE /><d:FLAG>X</d:FLAG></m:properties></atom:content></atom:entry>";a.send(n)})},updateInTransfer:function(e,t,a,n,o,r){console.log("Start updateInTransfer"),SapData.getCSRFToken(function(){for(var l='<?xml version="1.0" encoding="utf-8"?><atom:entry xmlns:atom ="http://www.w3.org/2005/Atom" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" xml:base="'+oRoutePlanSrv+'"><atom:content type="application/xml"><m:properties><d:PRINT_NAME>'+e+"</d:PRINT_NAME><d:SIGNATURE>"+t+'</d:SIGNATURE></m:properties></atom:content><atom:link rel="http://schemas.microsoft.com/ado/2007/08/dataservices/related/Intrnsfr_is" type="application/atom+xml;type=feed" title="ZMNK_MOBITOR_ROUTEPLANS_SRV.Intrnsfr_h_Intrnsfr_i"><m:inline><atom:feed>',s=0;s<o.length;s++)console.log(o[s].LineNo),lineNoFix=o[s].LineNo,"null"==lineNoFix&&(lineNoFix="0000"),l+='<atom:entry><atom:content type="application/xml"><m:properties><d:DOCUMENT_NUMB>'+o[s].DLPU+"</d:DOCUMENT_NUMB><d:LINE_NUMB>"+lineNoFix+"</d:LINE_NUMB><d:ENTRY_NUMB /><d:SERIAL_NUMB>"+(o[s].SerialNo?o[s].SerialNo:"")+"</d:SERIAL_NUMB><d:ITEM_NUMB>"+o[s].Item+"</d:ITEM_NUMB><d:QUANTITY>"+o[s].TotalQuantity+"</d:QUANTITY><d:UNIT>"+(o[s].UOM?o[s].UOM:"EA")+"</d:UNIT><d:DIST_OR_NUMB>"+n+"</d:DIST_OR_NUMB><d:LOT_NUMB>"+(o[s].BatchNo?o[s].BatchNo:"")+"</d:LOT_NUMB><d:PROCESSED>1</d:PROCESSED><d:HOURS>"+(o[s].Hours?o[s].Hours:"")+"</d:HOURS><d:ROUTE_NUMB>"+storeObject.selectedRoutePlanId+"</d:ROUTE_NUMB><d:ROUTEPLAN_LINE>"+a+"</d:ROUTEPLAN_LINE></m:properties></atom:content></atom:entry>";l+="</atom:feed></m:inline></atom:link></atom:entry>";var d=new XMLHttpRequest;d.open("POST",oInTransfer,!0),d.setRequestHeader("Access-Control-Allow-Origin","*"),d.setRequestHeader("Content-length",l.length),d.setRequestHeader("Content-Type","application/atom+xml"),d.setRequestHeader("Authorization",storeObject.auth),d.setRequestHeader("X-CSRF-Token",storeObject.CSRKey),d.setRequestHeader("Accept","application/atom+xml,application/atomsvc+xml,application/xml"),d.timeout=storeObject.oDataTimeOut,d.onreadystatechange=function(){console.log("Ready Status :"+d.readyState),console.log("Request Status :"+d.status),console.log("request URL:"+oInTransfer),console.log("response:"+d.responseXML),4==d.readyState&&(200==d.status||201==d.status||204==d.status?(console.log(oInTransfer),console.log("InTransfer Updated"),dbQueries.updateFlag("Update SyncDetails set InTransferFlag='1' where OrderNo='"+n+"'"),r()):(d.status>=400||0==d.status)&&(console.log("End with Error updateInTransfer"),console.log("Failed Value:"),console.log(l),SapData.UpdateError(d.status+" : End with Error updateInTransfer")))},d.send(l)})},NetworkError:function(){$("#loginpopup").popup("close"),navigator.notification.alert("Network Down! \n Please try later",function(){},"Error")},UpdateError:function(e){$("#popupLoaderSyncApp").popup("close"),navigator.notification.alert("Unable to Sync Data!\nData will be synced as soon as we receive connection",function(){},e)},loginError:function(){navigator.notification.alert("Invalid Username or Password",function(){},"Login Error"),navigator.notification.beep(1),$("#loginpopup").bind("popupafterclose",function(){$("#loginpopup").unbind("popupafterclose"),$("#popupDialogEmptyLogin").popup("open"),$("#loginErrorMsg").html("Invalid Username or Password!")}),$("#loginpopup").popup("close")}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhdGFsb2FkLmpzIl0sIm5hbWVzIjpbIlNhcERhdGEiLCJDYWxsRGF0YVNlcnZpY2UiLCJ1cmwiLCJjYWxsYmFjayIsInJlcXVlc3RyZXEiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJjb25zb2xlIiwibG9nIiwic3RvcmVPYmplY3QiLCJhdXRoIiwib0RhdGFUaW1lT3V0Iiwic2V0UmVxdWVzdEhlYWRlciIsInRpbWVvdXQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwicmVzcG9uc2VYTUwiLCJzZW5kIiwiQ2hlY2tMb2dpbiIsInVzZXJJZCIsInBhc3N3b3JkIiwic2VydmljZVVSTCIsIm9Mb2dpbiIsImVuY29kZVVSSUNvbXBvbmVudCIsInhtbERvYyIsInN0YXRlIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJ0ZXh0Q29udGVudCIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJyZW1vdmVJdGVtIiwiTmV0d29ya0Vycm9yIiwibG9hZFJvdXRlUGxhbiIsInJJZCIsIm9Sb3V0ZVBsYW4iLCJ4IiwiSUtNb2JpbGVEQiIsImRiIiwidHJhbnNhY3Rpb24iLCJ0eCIsInNxbCIsImkiLCJsZW5ndGgiLCJwYXJhbXMiLCJleGVjdXRlU3FsIiwidXBkYXRlU3FsIiwiciIsImxvYWRSb3V0ZURldGFpbHMiLCJsb2FkRGVsaXZlcnlQaWNrdXAiLCJsb2FkSW52ZW50b3J5IiwiJCIsInBvcHVwIiwic2V0VGltZW91dCIsImluZGV4ZmxhZyIsIm9Sb3V0ZURldGFpbHMiLCJkYXRlRm9ybWF0Iiwic3FsUm91dGVQbGFuVXBkYXRlIiwiY29tbWVudHMiLCJzcGxpdCIsImpvaW4iLCJ1cGRhdGVSb3V0ZURldGFpbHNTcWwiLCJiYXNlRGF0YVN5bmNMb2ciLCJmbGFnIiwib0RlbGl2ZXJ5UGlja3VwIiwidyIsInoiLCJzcWxSb3V0ZURldGFpbHNVcGRhdGUiLCJqIiwidXBkYXRlRGVsaXZlcnlQaWNrdXBTcWwiLCJvSW52ZW50b3J5IiwiZ2V0Q1NSRlRva2VuIiwicmVxdWVzdENTUiIsIm9JblRyYW5zZmVyIiwiYWRhdGEiLCJnZXRSZXNwb25zZUhlYWRlciIsIkNTUktleSIsInVwZGF0ZVJvdXRlUGxhbkhlYWRlclN0YXR1cyIsImRhdGFPYmoiLCJvVXBkYXRlUm91dGVQbGFuIiwiUm91dGVQbGFuSWQiLCJkYlF1ZXJpZXMiLCJ1cGRhdGVGbGFnIiwiUm91dGVJZCIsIlVwZGF0ZUVycm9yIiwicmV0dXJudmFsIiwib1JvdXRlUGxhblNydiIsIk9kb21ldGVyU3RhcnRSZWFkaW5nIiwiT2RvbWV0ZXJFbmRSZWFkaW5nIiwidXBkYXRlUm91dGVQbGFuTGluZVN0YXR1cyIsIlJvdXRlUGxhbl9MaW5lIiwidXBkYXRlQXJyaXZhbERlcGFydHVyZSIsIm9VcGRhdGVBcnJpdmFsRGVwYXJ0dXJlIiwiTG9jYXRpb24iLCJzZW5kRGF0ZSIsIkFycml2YWwiLCJzZW5kVGltZSIsIkRlcGFydHVyZSIsInVwZGF0ZUluVHJhbnNmZXIiLCJjdXN0b21lck5hbWUiLCJjdXN0b21lclNpZ25hdHVyZSIsInJvdXRlUGxhbkxpbmUiLCJvcmRlck5vIiwiZGF0YU9iakFyciIsIkxpbmVObyIsImxpbmVOb0ZpeCIsIkRMUFUiLCJTZXJpYWxObyIsIkl0ZW0iLCJUb3RhbFF1YW50aXR5IiwiVU9NIiwiQmF0Y2hObyIsIkhvdXJzIiwic2VsZWN0ZWRSb3V0ZVBsYW5JZCIsIm5hdmlnYXRvciIsIm5vdGlmaWNhdGlvbiIsImFsZXJ0IiwiZXJyb3JNZXNzYWdlIiwibG9naW5FcnJvciIsImJlZXAiLCJiaW5kIiwidW5iaW5kIiwiaHRtbCJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsVUFFQUMsZ0JBQWlCLFNBQVVDLEVBQUtDLEdBQzVCLEdBQUlDLEdBQWEsR0FBSUMsZUFDckJELEdBQVdFLEtBQUssTUFBT0osR0FBSyxHQUU1QkssUUFBUUMsSUFBSU4sRUFBTSxLQUFPTyxZQUFZQyxLQUFPLEtBQU9ELFlBQVlFLGNBQy9EUCxFQUFXUSxpQkFBaUIsZ0JBQWlCSCxZQUFZQyxNQUN6RE4sRUFBV1MsUUFBVUosWUFBWUUsYUFFakNQLEVBQVdVLG1CQUFxQixXQUVDLEdBQXpCVixFQUFXVyxhQUNjLEtBQXJCWCxFQUFXWSxPQUNYYixFQUFTQyxFQUFXYSxhQUFhLEdBQ0wsS0FBckJiLEVBQVdZLFFBQXNDLEtBQXJCWixFQUFXWSxRQUFzQyxLQUFyQlosRUFBV1ksUUFBc0MsS0FBckJaLEVBQVdZLFFBQXNDLEtBQXJCWixFQUFXWSxRQUFzQyxHQUFyQlosRUFBV1ksUUFDOUpiLEVBQVNDLEVBQVdhLGFBQWEsS0FNN0NiLEVBQVdjLFFBR2ZDLFdBQVksU0FBVUMsRUFBUUMsRUFBVWxCLEdBQ3BDLEdBQUltQixHQUFhQyxPQUFTLGVBQWlCQyxtQkFBbUJILEdBQVksWUFBY0csbUJBQW1CSixHQUFVLElBQ3JIcEIsU0FBUUMsZ0JBQWdCcUIsRUFBWSxTQUFVRyxFQUFRQyxHQUM5Q0EsRUFDZ0UsaUJBQTVERCxFQUFPRSxxQkFBcUIsY0FBYyxHQUFHQyxhQUM3Q3JCLFFBQVFDLElBQUksaUJBQ1pxQixhQUFhQyxRQUFRLFNBQVVWLEdBQy9CakIsRUFBUyxhQUVUSSxRQUFRQyxJQUFJLGdCQUNacUIsYUFBYUUsV0FBVyxTQUFVWCxHQUNsQ2pCLEVBQVMsWUFHYkgsUUFBUWdDLGtCQUtwQkMsY0FBZSxTQUFVYixFQUFRakIsR0FDN0IsR0FBSStCLEtBQ0psQyxTQUFRQyxnQkFBZ0JrQyxXQUFhLElBQU1mLEVBQVMsSUFBSyxTQUFVSyxFQUFRQyxHQUV2RSxHQUFJQSxFQUFPLENBQ1AsR0FBSVUsR0FBSVgsRUFBT0UscUJBQXFCLFFBQ3lCLHNCQUF6RFMsRUFBRSxHQUFHVCxxQkFBcUIsYUFBYSxHQUFHQyxZQUMxQ1MsV0FBV0MsR0FBR0MsWUFDVixTQUFVQyxHQUlOLElBQUssR0FGREMsR0FBTSw4R0FFREMsRUFBSSxFQUFHQSxFQUFJTixFQUFFTyxPQUFRRCxJQUFLLENBQy9CLEdBQUlFLElBQVVSLEVBQUVNLEdBQUdmLHFCQUFxQixlQUFlLEdBQUdDLFlBQWFRLEVBQUVNLEdBQUdmLHFCQUFxQixlQUFlLEdBQUdDLFlBQWFRLEVBQUVNLEdBQUdmLHFCQUFxQixVQUFVLEdBQUdDLFlBQWFRLEVBQUVNLEdBQUdmLHFCQUFxQixZQUFZLEdBQUdDLFlBQWEsR0FDMU9ZLEdBQUdLLFdBQVdKLEVBQUtHLEdBRW5CVixFQUFJUSxHQUFLTixFQUFFTSxHQUFHZixxQkFBcUIsZUFBZSxHQUFHQyxZQUl6RCxHQUFJa0IsR0FBWSxzSEFDaEJOLEdBQUdLLFdBQVdDLEtBQWUsYUFBZ0IsY0FFN0N2QyxRQUFRQyxJQUFJLHFDQUNaLEtBQUssR0FBSXVDLEdBQUksRUFBR0EsRUFBSWIsRUFBSVMsT0FBUUksSUFDeEJBLEdBQU1iLEVBQUlTLE9BQVMsRUFDbkIzQyxRQUFRZ0QsaUJBQWlCNUIsRUFBUWMsRUFBSWEsR0FBSSxJQUFLLFNBQVViLEdBQ3BEbEMsUUFBUWlELG1CQUFtQmYsRUFBSyxJQUFLLFNBQVVBLEdBQzNDbEMsUUFBUWtELGNBQWNoQixFQUFLLElBQUsvQixPQUl4Q0gsUUFBUWdELGlCQUFpQjVCLEVBQVFjLEVBQUlhLEdBQUksSUFBSyxTQUFVYixHQUNwRGxDLFFBQVFpRCxtQkFBbUJmLEVBQUssSUFBSyxTQUFVQSxHQUMzQ2xDLFFBQVFrRCxjQUFjaEIsRUFBSyxJQUFLL0IsVUFReERnRCxFQUFFLGVBQWVDLE1BQU0sU0FDdkJDLFdBQVcsV0FDUEYsRUFBRSxvQ0FBb0NDLE1BQU0sU0FDN0MsS0FDSEMsV0FBVyxXQUNQRixFQUFFLG9DQUFvQ0MsTUFBTSxVQUM3QyxNQUNIdkIsYUFBYUUsV0FBVyxlQU14Q2lCLGlCQUFrQixTQUFVNUIsRUFBUWMsRUFBS29CLEVBQVduRCxHQUVoRCxHQUFJbUIsR0FBYWlDLGNBQWdCLElBQU1uQyxFQUFTLHVCQUF5QmMsRUFBTSxHQUUvRWxDLFNBQVFDLGdCQUFnQnFCLEVBQVksU0FBVUcsRUFBUUMsR0FFbEQsR0FBSUEsRUFBTyxDQUNQLEdBQUlVLEdBQUlYLEVBQU9FLHFCQUFxQixTQUFTLEdBQUdBLHFCQUFxQixRQUVyRVUsWUFBV0MsR0FBR0MsWUFBWSxTQUFVQyxHQUVoQyxHQUFJQyxHQUFNLG1QQUVORyxHQUFVLEVBQUdWLEVBQUtBLEVBQU0sS0FBTUUsRUFBRSxHQUFHVCxxQkFBcUIsb0JBQW9CLEdBQUdDLFlBQWFRLEVBQUUsR0FBR1QscUJBQXFCLGNBQWMsR0FBR0MsWUFBYVEsRUFBRSxHQUFHVCxxQkFBcUIsY0FBYyxHQUFHQyxZQUFhUSxFQUFFLEdBQUdULHFCQUFxQixtQkFBbUIsR0FBR0MsWUFBYVEsRUFBRSxHQUFHVCxxQkFBcUIsVUFBVSxHQUFHQyxZQUFhUSxFQUFFLEdBQUdULHFCQUFxQixZQUFZLEdBQUdDLFlBQWFRLEVBQUUsR0FBR1QscUJBQXFCLFdBQVcsR0FBR0MsWUFBYSxJQUFLNEIsV0FBV3BCLEVBQUUsR0FBR1QscUJBQXFCLFlBQVksR0FBR0MsYUFBYyxHQUFJLEdBQUksR0FDM2ZZLEdBQUdLLFdBQVdKLEVBQUtHLEVBRW5CLEtBQUssR0FBSUYsR0FBSSxFQUFHQSxFQUFJTixFQUFFTyxPQUFRRCxJQUFLLENBQy9CLEdBQUlFLElBQVVGLEVBQUdSLEVBQUtBLEVBQU0sSUFBTVEsRUFBR04sRUFBRU0sR0FBR2YscUJBQXFCLG9CQUFvQixHQUFHQyxZQUFhUSxFQUFFTSxHQUFHZixxQkFBcUIsY0FBYyxHQUFHQyxZQUFhUSxFQUFFTSxHQUFHZixxQkFBcUIsY0FBYyxHQUFHQyxZQUFhUSxFQUFFTSxHQUFHZixxQkFBcUIsbUJBQW1CLEdBQUdDLFlBQWFRLEVBQUVNLEdBQUdmLHFCQUFxQixVQUFVLEdBQUdDLFlBQWFRLEVBQUVNLEdBQUdmLHFCQUFxQixZQUFZLEdBQUdDLFlBQWFRLEVBQUVNLEdBQUdmLHFCQUFxQixXQUFXLEdBQUdDLFlBQWE0QixXQUFXcEIsRUFBRU0sR0FBR2YscUJBQXFCLFlBQVksR0FBR0MsYUFBYzRCLFdBQVdwQixFQUFFTSxHQUFHZixxQkFBcUIsWUFBWSxHQUFHQyxhQUFjLEdBQUksR0FBSSxHQUMzakJZLEdBQUdLLFdBQVdKLEVBQUtHLEdBR3ZCLEdBQUlBLElBQVVSLEVBQUVPLE9BQVFULEVBQUtBLEVBQU0sSUFBTUUsRUFBRU8sT0FBUVAsRUFBRSxHQUFHVCxxQkFBcUIsb0JBQW9CLEdBQUdDLFlBQWFRLEVBQUUsR0FBR1QscUJBQXFCLGNBQWMsR0FBR0MsWUFBYVEsRUFBRSxHQUFHVCxxQkFBcUIsY0FBYyxHQUFHQyxZQUFhUSxFQUFFLEdBQUdULHFCQUFxQixtQkFBbUIsR0FBR0MsWUFBYVEsRUFBRSxHQUFHVCxxQkFBcUIsVUFBVSxHQUFHQyxZQUFhUSxFQUFFLEdBQUdULHFCQUFxQixZQUFZLEdBQUdDLFlBQWFRLEVBQUUsR0FBR1QscUJBQXFCLFdBQVcsR0FBR0MsWUFBYTRCLFdBQVdwQixFQUFFLEdBQUdULHFCQUFxQixZQUFZLEdBQUdDLGFBQWMsSUFBSyxHQUFJLEdBQUksR0FDNWdCWSxHQUFHSyxXQUFXSixFQUFLRyxFQUVuQixJQUFJYSxHQUFxQixnR0FDckJDLEVBQVdqQyxFQUFPRSxxQkFBcUIsY0FBYyxHQUFHQyxZQUFZK0IsTUFBTSxNQUFNQyxLQUFLLE9BSXpGLElBRkFwQixFQUFHSyxXQUFXWSxHQUFxQmhDLEVBQU9FLHFCQUFxQixvQkFBb0IsR0FBR0MsWUFBYThCLEVBQVVqQyxFQUFPRSxxQkFBcUIsWUFBWSxHQUFHQyxZQUFhSCxFQUFPRSxxQkFBcUIsVUFBVSxHQUFHQyxZQUFhTSxJQUUxTSxLQUFib0IsRUFBa0IsQ0FDbEIsR0FBSU8sR0FBd0Isd01BQzVCckIsR0FBR0ssV0FBV2dCLEtBQTJCLGFBQWdCLGNBRXpEdEQsUUFBUUMsSUFBSSx5Q0FDWkQsUUFBUUMsSUFBSSwyQkFDWjZCLFdBQVd5QixnQkFBZ0IsYUFDM0J6QixXQUFXeUIsZ0JBQWdCLGdCQUUvQjNELEVBQVMrQixTQUdJLEtBQWJvQixJQUNBakIsV0FBV0MsR0FBR0MsWUFBWSxTQUFVQyxHQUNoQyxHQUFJcUIsR0FBd0Isd01BQzVCckIsR0FBR0ssV0FBV2dCLEtBQTJCLGFBQWdCLGdCQUU3RHRELFFBQVFDLElBQUkseUNBQ1pELFFBQVFDLElBQUksMkJBQ1o2QixXQUFXeUIsZ0JBQWdCLGFBQzNCekIsV0FBV3lCLGdCQUFnQixpQkFFL0IzRCxFQUFTK0IsTUFLckJlLG1CQUFvQixTQUFVZixFQUFLNkIsRUFBTTVELEdBRXJDLEdBQUltQixHQUFhMEMsZ0JBQWtCLElBQU05QixFQUFNLG1CQUMvQ2xDLFNBQVFDLGdCQUFnQnFCLEVBQVksU0FBVUcsRUFBUUMsR0FFbEQsR0FBSUEsRUFBTyxDQUNQLEdBQUl1QyxHQUFJeEMsRUFBT0UscUJBQXFCLFFBQVEsR0FBR0EscUJBQXFCLFFBR2hFdUMsRUFBSXpDLEVBQU9FLHFCQUFxQixRQUFRLEVBRTVDVSxZQUFXQyxHQUFHQyxZQUFZLFNBQVVDLEdBS2hDLElBQUssR0FKREMsR0FBTSwwTUFFTjBCLEVBQXdCLDhGQUVuQkMsRUFBSSxFQUFHQSxFQUFJSCxFQUFFdEIsT0FBUXlCLElBQUssQ0FHL0IsSUFBSyxHQUZEaEMsR0FBSTZCLEVBQUVHLEdBQUd6QyxxQkFBcUIsU0FFekJlLEVBQUksRUFBR0EsRUFBSU4sRUFBRU8sT0FBUUQsSUFBSyxDQUMvQixHQUFJRSxJQUFVUixFQUFFTSxHQUFHZixxQkFBcUIsV0FBVyxHQUFHQyxZQUFhUSxFQUFFTSxHQUFHZixxQkFBcUIsY0FBYyxHQUFHQyxZQUFhUSxFQUFFTSxHQUFHZixxQkFBcUIsV0FBVyxHQUFHQyxZQUFjLElBQU1jLEVBQUdOLEVBQUVNLEdBQUdmLHFCQUFxQixjQUFjLEdBQUdDLFlBQWFRLEVBQUVNLEdBQUdmLHFCQUFxQixhQUFhLEdBQUdDLFlBQWFRLEVBQUVNLEdBQUdmLHFCQUFxQixjQUFjLEdBQUdDLFlBQWFRLEVBQUVNLEdBQUdmLHFCQUFxQixlQUFlLEdBQUdDLFlBQWFRLEVBQUVNLEdBQUdmLHFCQUFxQixjQUFjLEdBQUdDLFlBQWFRLEVBQUVNLEdBQUdmLHFCQUFxQixlQUFlLEdBQUdDLFlBQWFRLEVBQUVNLEdBQUdmLHFCQUFxQixVQUFVLEdBQUdDLFlBQWFRLEVBQUVNLEdBQUdmLHFCQUFxQixZQUFZLEdBQUdDLFlBQ3htQlksR0FBR0ssV0FBV0osRUFBS0csR0FHdkJKLEVBQUdLLFdBQVdzQixHQUF3QkQsRUFBRXZDLHFCQUFxQixjQUFjeUMsR0FBR3hDLFlBQWMsSUFBTXNDLEVBQUV2QyxxQkFBcUIsYUFBYXlDLEdBQUd4QyxZQUFhTSxFQUFLRSxFQUFFLEdBQUdULHFCQUFxQixXQUFXLEdBQUdDLGNBR3ZNLEdBQUl5QyxHQUEwQixrWkFDOUI3QixHQUFHSyxXQUFXd0IsS0FBNkIsV0FDdkMsR0FBSVIsR0FBd0IsK0RBQWlFM0IsRUFBTSx1SEFDbkdNLEdBQUdLLFdBQVdnQixLQUEyQixhQUFnQixlQUMxRCxjQUVTLEtBQVJFLElBQ0F4RCxRQUFRQyxJQUFJLDJDQUNaNkIsV0FBV3lCLGdCQUFnQixtQkFFL0IzRCxFQUFTK0IsU0FHRCxLQUFSNkIsSUFDQTFCLFdBQVdDLEdBQUdDLFlBQVksU0FBVUMsR0FDaEMsR0FBSTZCLEdBQTBCLGtaQUM5QjdCLEdBQUdLLFdBQVd3QixLQUE2QixXQUN2QyxHQUFJUixHQUF3QiwrREFBaUUzQixFQUFNLHVIQUNuR00sR0FBR0ssV0FBV2dCLEtBQTJCLGFBQWdCLGVBQzFELGdCQUVQdEQsUUFBUUMsSUFBSSwyQ0FDWjZCLFdBQVd5QixnQkFBZ0IsbUJBRS9CM0QsRUFBUytCLE1BS3JCZ0IsY0FBZSxTQUFVaEIsRUFBSzZCLEVBQU01RCxHQUNoQyxHQUFJbUIsR0FBYWdELFdBQWEsSUFBTXBDLEVBQU0sR0FFMUNsQyxTQUFRQyxnQkFBZ0JxQixFQUFZLFNBQVVHLEVBQVFDLEdBQ2xELEdBQUlBLEVBQU8sQ0FDUCxHQUFJVSxHQUFJWCxFQUFPRSxxQkFBcUIsUUFFcENVLFlBQVdDLEdBQUdDLFlBQ1YsU0FBVUMsR0FHTixJQUFLLEdBRkRDLEdBQU0sdU1BRURDLEVBQUksRUFBR0EsRUFBSU4sRUFBRU8sT0FBUUQsSUFBSyxDQUMvQixHQUFJRSxJQUFVUixFQUFFTSxHQUFHZixxQkFBcUIsZUFBZSxHQUFHQyxZQUFhUSxFQUFFTSxHQUFHZixxQkFBcUIsZUFBZSxHQUFHQyxZQUFjLElBQU1jLEVBQUdOLEVBQUVNLEdBQUdmLHFCQUFxQixjQUFjLEdBQUdDLFlBQWFRLEVBQUVNLEdBQUdmLHFCQUFxQixhQUFhLEdBQUdDLFlBQWFRLEVBQUVNLEdBQUdmLHFCQUFxQixjQUFjLEdBQUdDLFlBQWFRLEVBQUVNLEdBQUdmLHFCQUFxQixlQUFlLEdBQUdDLFlBQWFRLEVBQUVNLEdBQUdmLHFCQUFxQixTQUFTLEdBQUdDLFlBQWFRLEVBQUVNLEdBQUdmLHFCQUFxQixlQUFlLEdBQUdDLFlBQWFRLEVBQUVNLEdBQUdmLHFCQUFxQixZQUFZLEdBQUdDLFlBQWFRLEVBQUVNLEdBQUdmLHFCQUFxQixVQUFVLEdBQUdDLFlBQWFRLEVBQUVNLEdBQUdmLHFCQUFxQixjQUFjLEdBQUdDLFlBQzNtQlksR0FBR0ssV0FBV0osRUFBS0csR0FHWCxLQUFSbUIsSUFDQXhELFFBQVFDLElBQUksc0NBQ1o2QixXQUFXeUIsZ0JBQWdCLGFBQzNCM0QsV0FJQSxLQUFSNEQsSUFDQXhELFFBQVFDLElBQUksc0NBQ1o2QixXQUFXeUIsZ0JBQWdCLGFBQzNCM0QsUUFNaEJvRSxhQUFjLFNBQVVwRSxHQUdwQixHQUFJcUUsR0FBYSxHQUFJbkUsZUFDckJtRSxHQUFXbEUsS0FBSyxNQUFPbUUsYUFBYSxHQUNwQ0QsRUFBVzVELGlCQUFpQixnQkFBaUJILFlBQVlDLE1BQ3pEOEQsRUFBVzVELGlCQUFpQixlQUFnQixTQUM1QzRELEVBQVczRCxRQUFVSixZQUFZRSxhQUVqQzZELEVBQVcxRCxtQkFBcUIsV0FFNUIsR0FBNkIsR0FBekIwRCxFQUFXekQsV0FBaUIsQ0FFNUIsR0FBSTJELEdBQVFGLEVBQVdHLGtCQUFrQixlQUN6Q2xFLGFBQVltRSxPQUFTRixFQUVyQm5FLFFBQVFDLElBQUksbUJBQXFCQyxZQUFZbUUsUUFDN0N6RSxNQUdScUUsRUFBV3RELFFBR2YyRCw0QkFBNkIsU0FBVUMsRUFBUzlELEVBQVFiLEdBRXBESSxRQUFRQyxJQUFJLHVDQUVaUixRQUFRdUUsYUFBYSxXQUNqQixHQUFJbkUsR0FBYSxHQUFJQyxlQUNyQkQsR0FBV0UsS0FBSyxNQUFPeUUsaUJBQW1CLEtBQU9ELEVBQVEsR0FBR0UsWUFBYyxNQUFNLEdBRWhGNUUsRUFBV1EsaUJBQWlCLGVBQWdCLHdCQUM1Q1IsRUFBV1EsaUJBQWlCLGdCQUFpQkgsWUFBWUMsTUFDekROLEVBQVdRLGlCQUFpQixlQUFnQkgsWUFBWW1FLFFBQ3hEeEUsRUFBV1EsaUJBQWlCLFNBQVUsZ0VBQ3RDUixFQUFXUyxRQUFVSixZQUFZRSxhQUVqQ1AsRUFBV1UsbUJBQXFCLFdBRUMsR0FBekJWLEVBQVdXLGFBRWMsS0FBckJYLEVBQVdZLFFBQXNDLEtBQXJCWixFQUFXWSxRQUFzQyxLQUFyQlosRUFBV1ksUUFLbkVULFFBQVFDLElBQUksb0NBQ1p5RSxVQUFVQyxXQUFXLDhEQUFnRUosRUFBUSxHQUFHSyxRQUFVLEtBQzFHaEYsTUFHQUksUUFBUUMsSUFBSSw4Q0FDWlIsUUFBUW9GLFlBQVloRixFQUFXWSxPQUFTLG1EQU1wRCxJQUFJcUUsR0FBWSxrUEFDa01DLGNBQWdCLHFFQUc1TVIsRUFBUSxHQUFHRSxZQUFjLHdFQUVwQmhFLEVBQVMsbUNBQ2Q4RCxFQUFRLEdBQUdTLHFCQUF1Qiw2QkFDbkNULEVBQVEsR0FBR1UsbUJBQXFCVixFQUFRLEdBQUdVLG1CQUFxQixLQUFPLCtFQU81RnBGLEdBQVdjLEtBQUttRSxNQUl4QkksMEJBQTJCLFNBQVVYLEVBQVM5RCxFQUFRYixHQUVsREksUUFBUUMsSUFBSSxxQ0FFWlIsUUFBUXVFLGFBQWEsV0FDakIsR0FBSW5FLEdBQWEsR0FBSUMsZUFDckJELEdBQVdFLEtBQUssTUFBT3lFLGlCQUFtQixLQUFPRCxFQUFRLEdBQUdFLFlBQWMsTUFBTSxHQUVoRjVFLEVBQVdRLGlCQUFpQixlQUFnQix3QkFDNUNSLEVBQVdRLGlCQUFpQixnQkFBaUJILFlBQVlDLE1BQ3pETixFQUFXUSxpQkFBaUIsZUFBZ0JILFlBQVltRSxRQUN4RHhFLEVBQVdRLGlCQUFpQixTQUFVLGdFQUN0Q1IsRUFBV1MsUUFBVUosWUFBWUUsYUFFakNQLEVBQVdVLG1CQUFxQixXQUVDLEdBQXpCVixFQUFXVyxhQUVjLEtBQXJCWCxFQUFXWSxRQUFzQyxLQUFyQlosRUFBV1ksUUFBc0MsS0FBckJaLEVBQVdZLFFBS25FVCxRQUFRQyxJQUFJLGtDQUNaeUUsVUFBVUMsV0FBVyw0REFBOERKLEVBQVEsR0FBR0ssUUFBVSxLQUN4R2hGLE1BR0FJLFFBQVFDLElBQUksNENBQ1pSLFFBQVFvRixZQUFZaEYsRUFBV1ksT0FBUywrQ0FDeENpRSxVQUFVQyxXQUFXLDREQUE4REosRUFBUSxHQUFHSyxRQUFVLE9BSXBILElBQUlFLEdBQVksaVBBQ2lNQyxjQUFnQixxRUFHM01SLEVBQVEsR0FBR0UsWUFBYyxtQ0FDcEJGLEVBQVEsR0FBR1ksZUFBaUIsd0NBQzVCMUUsRUFBUyw0RUFPcENaLEdBQVdjLEtBQUttRSxNQUt4Qk0sdUJBQXdCLFNBQVViLEVBQVMzRSxHQUV2Q0ksUUFBUUMsSUFBSSxrQ0FFWlIsUUFBUXVFLGFBQWEsV0FDakIsR0FBSW5FLEdBQWEsR0FBSUMsZUFDckJELEdBQVdFLEtBQUssTUFBT3NGLHdCQUEwQixlQUFpQmQsRUFBUSxHQUFHRSxZQUFjLHFCQUF1QkYsRUFBUSxHQUFHWSxlQUFpQixNQUFNLEdBRXBKdEYsRUFBV1EsaUJBQWlCLGVBQWdCLHdCQUM1Q1IsRUFBV1EsaUJBQWlCLGdCQUFpQkgsWUFBWUMsTUFDekROLEVBQVdRLGlCQUFpQixlQUFnQkgsWUFBWW1FLFFBQ3hEeEUsRUFBV1EsaUJBQWlCLFNBQVUsZ0VBQ3RDUixFQUFXUyxRQUFVSixZQUFZRSxhQUVqQ1AsRUFBV1UsbUJBQXFCLFdBRUMsR0FBekJWLEVBQVdXLGFBQ1hSLFFBQVFDLElBQUksc0NBQXdDSixFQUFXWSxRQUN0QyxLQUFyQlosRUFBV1ksUUFBc0MsS0FBckJaLEVBQVdZLFFBQXNDLEtBQXJCWixFQUFXWSxRQUluRVMsT0FBU3JCLEVBQVdhLFlBRXBCVixRQUFRQyxJQUFJLDZCQUNaeUUsVUFBVUMsV0FBVyx3REFBMERKLEVBQVEsR0FBR0ssUUFBVSxLQUNwR2hGLE1BRUFJLFFBQVFDLElBQUkseUNBRVpSLFFBQVFvRixZQUFZaEYsRUFBV1ksT0FBUyw0Q0FDeENpRSxVQUFVQyxXQUFXLHdEQUEwREosRUFBUSxHQUFHSyxRQUFVLE9BS2hILElBQUlFLEdBQVksaVBBQ2lNQyxjQUFnQiwwRUFHM01SLEVBQVEsR0FBR0UsWUFBYyxtQ0FDcEJGLEVBQVEsR0FBR1ksZUFBaUIsdUZBRzdCWixFQUFRLEdBQUdlLFNBQVcscURBRTNCQyxTQUFTaEIsRUFBUSxHQUFHaUIsU0FBVyw0QkFDL0JDLFNBQVNsQixFQUFRLEdBQUdpQixTQUFXLDRCQUMvQkQsU0FBU2hCLEVBQVEsR0FBR21CLFdBQWEsNEJBQ2pDRCxTQUFTbEIsRUFBUSxHQUFHbUIsV0FBYSx5RkFRdEQ3RixHQUFXYyxLQUFLbUUsTUFNeEJhLGlCQUFrQixTQUFVQyxFQUFjQyxFQUFtQkMsRUFBZUMsRUFBU0MsRUFBWXBHLEdBRTdGSSxRQUFRQyxJQUFJLDBCQUVaUixRQUFRdUUsYUFBYSxXQWVqQixJQUFLLEdBYkRjLEdBQVksa1BBQ2tNQyxjQUFnQixzRUFHM01hLEVBQWUsK0JBQ2hCQyxFQUFvQiwrUEFRakMxRCxFQUFJLEVBQUdBLEVBQUk2RCxFQUFXNUQsT0FBUUQsSUFFbkNuQyxRQUFRQyxJQUFJK0YsRUFBVzdELEdBQUc4RCxRQUUxQkMsVUFBWUYsRUFBVzdELEdBQUc4RCxPQUVULFFBQWJDLFlBQ0FBLFVBQVksUUFHaEJwQixHQUFhLG1GQUdha0IsRUFBVzdELEdBQUdnRSxLQUFPLGtDQUN6QkQsVUFBWSxpREFFVEYsRUFBVzdELEdBQUdpRSxTQUFXSixFQUFXN0QsR0FBR2lFLFNBQVcsSUFBTSxnQ0FDM0RKLEVBQVc3RCxHQUFHa0UsS0FBTyw2QkFDdEJMLEVBQVc3RCxHQUFHbUUsY0FBZ0IseUJBQ2pDTixFQUFXN0QsR0FBR29FLElBQU1QLEVBQVc3RCxHQUFHb0UsSUFBTSxNQUFRLDRCQUN6Q1IsRUFBVSxpQ0FDYkMsRUFBVzdELEdBQUdxRSxRQUFVUixFQUFXN0QsR0FBR3FFLFFBQVUsSUFBTSxzREFFekRSLEVBQVc3RCxHQUFHc0UsTUFBUVQsRUFBVzdELEdBQUdzRSxNQUFRLElBQU0sMkJBQzlDdkcsWUFBWXdHLG9CQUFzQixvQ0FDOUJaLEVBQWdCLGdFQU8vQ2hCLElBQWEsa0RBS2IsSUFBSWpGLEdBQWEsR0FBSUMsZUFDckJELEdBQVdFLEtBQUssT0FBUW1FLGFBQWEsR0FDckNyRSxFQUFXUSxpQkFBaUIsOEJBQStCLEtBQzNEUixFQUFXUSxpQkFBaUIsaUJBQWtCeUUsRUFBVTFDLFFBQ3hEdkMsRUFBV1EsaUJBQWlCLGVBQWdCLHdCQUM1Q1IsRUFBV1EsaUJBQWlCLGdCQUFpQkgsWUFBWUMsTUFDekROLEVBQVdRLGlCQUFpQixlQUFnQkgsWUFBWW1FLFFBQ3hEeEUsRUFBV1EsaUJBQWlCLFNBQVUsZ0VBQ3RDUixFQUFXUyxRQUFVSixZQUFZRSxhQUVqQ1AsRUFBV1UsbUJBQXFCLFdBRzVCUCxRQUFRQyxJQUFJLGlCQUFtQkosRUFBV1csWUFDMUNSLFFBQVFDLElBQUksbUJBQXFCSixFQUFXWSxRQUM1Q1QsUUFBUUMsSUFBSSxlQUFpQmlFLGFBQzdCbEUsUUFBUUMsSUFBSSxZQUFjSixFQUFXYSxhQUVSLEdBQXpCYixFQUFXVyxhQUNjLEtBQXJCWCxFQUFXWSxRQUFzQyxLQUFyQlosRUFBV1ksUUFBc0MsS0FBckJaLEVBQVdZLFFBQ25FVCxRQUFRQyxJQUFJaUUsYUFDWmxFLFFBQVFDLElBQUksc0JBQ1p5RSxVQUFVQyxXQUFXLDREQUE4RG9CLEVBQVUsS0FDN0ZuRyxNQUVLQyxFQUFXWSxRQUFVLEtBQTRCLEdBQXJCWixFQUFXWSxVQUU1Q1QsUUFBUUMsSUFBSSxtQ0FDWkQsUUFBUUMsSUFBSSxpQkFDWkQsUUFBUUMsSUFBSTZFLEdBQ1pyRixRQUFRb0YsWUFBWWhGLEVBQVdZLE9BQVMseUNBUXBEWixFQUFXYyxLQUFLbUUsTUFJeEJyRCxhQUFjLFdBQ1ZtQixFQUFFLGVBQWVDLE1BQU0sU0FDdkI4RCxVQUFVQyxhQUFhQyxNQUFNLG9DQUFxQyxhQUFnQixVQUt0RmhDLFlBQWEsU0FBVWlDLEdBQ25CbEUsRUFBRSx1QkFBdUJDLE1BQU0sU0FDL0I4RCxVQUFVQyxhQUFhQyxNQUFNLDZFQUE4RSxhQUFnQkMsSUFLL0hDLFdBQVksV0FDUkosVUFBVUMsYUFBYUMsTUFBTSwrQkFBZ0MsYUFBZ0IsZUFDN0VGLFVBQVVDLGFBQWFJLEtBQUssR0FFNUJwRSxFQUFFLGVBQWVxRSxLQUFLLGtCQUFtQixXQUVyQ3JFLEVBQUUsZUFBZXNFLE9BQU8sbUJBQ3hCdEUsRUFBRSwwQkFBMEJDLE1BQU0sUUFDbENELEVBQUUsa0JBQWtCdUUsS0FBSyxtQ0FFN0J2RSxFQUFFLGVBQWVDLE1BQU0iLCJmaWxlIjoiZGF0YWxvYWQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIFNhcERhdGEgPSB7XG5cbiAgICBDYWxsRGF0YVNlcnZpY2U6IGZ1bmN0aW9uICh1cmwsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciByZXF1ZXN0cmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHJlcXVlc3RyZXEub3BlbihcIkdFVFwiLCB1cmwsIHRydWUpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKHVybCArIFwiOjpcIiArIHN0b3JlT2JqZWN0LmF1dGggKyBcIjo6XCIgKyBzdG9yZU9iamVjdC5vRGF0YVRpbWVPdXQpO1xuICAgICAgICByZXF1ZXN0cmVxLnNldFJlcXVlc3RIZWFkZXIoJ0F1dGhvcml6YXRpb24nLCBzdG9yZU9iamVjdC5hdXRoKTtcbiAgICAgICAgcmVxdWVzdHJlcS50aW1lb3V0ID0gc3RvcmVPYmplY3Qub0RhdGFUaW1lT3V0O1xuXG4gICAgICAgIHJlcXVlc3RyZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy9DYWxsIGEgZnVuY3Rpb24gd2hlbiB0aGUgc3RhdGUgY2hhbmdlcy5cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0cmVxLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0cmVxLnN0YXR1cyA9PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVxdWVzdHJlcS5yZXNwb25zZVhNTCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXF1ZXN0cmVxLnN0YXR1cyA9PSA1MDEgfHwgcmVxdWVzdHJlcS5zdGF0dXMgPT0gNTAwIHx8IHJlcXVlc3RyZXEuc3RhdHVzID09IDQwNCB8fCByZXF1ZXN0cmVxLnN0YXR1cyA9PSA0MDMgfHwgcmVxdWVzdHJlcS5zdGF0dXMgPT0gNDAwIHx8IHJlcXVlc3RyZXEuc3RhdHVzID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVxdWVzdHJlcS5yZXNwb25zZVhNTCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAvLyA0MDA6IEJhZCByZXF1ZXN0IHwgNDAzOiBGb3JiaWRkZW4gfCA0MDQ6IE5vdCBmb3VuZCB8IDUwMDogU2VydmVyIGVycm9yIHwgNTAxOiBOb3QgaW1wbGVtZW50ZWQgfCAwOiBub3RoaW5nIHJldHVybmVkXG4gICAgICAgICAgICAgICAgICAgIC8vU2FwRGF0YS5OZXR3b3JrRXJyb3IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJlcXVlc3RyZXEuc2VuZCgpO1xuICAgIH0sXG5cbiAgICBDaGVja0xvZ2luOiBmdW5jdGlvbiAodXNlcklkLCBwYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHNlcnZpY2VVUkwgPSBvTG9naW4gKyBcIihJUGFzc3dvcmQ9J1wiICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhc3N3b3JkKSArIFwiJyxJVXNlcj0nXCIgKyBlbmNvZGVVUklDb21wb25lbnQodXNlcklkKSArIFwiJylcIjtcbiAgICAgICAgU2FwRGF0YS5DYWxsRGF0YVNlcnZpY2Uoc2VydmljZVVSTCwgZnVuY3Rpb24gKHhtbERvYywgc3RhdGUpIHtcbiAgICAgICAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICAgICAgICAgIGlmICh4bWxEb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkOkVNZXNzYWdlXCIpWzBdLnRleHRDb250ZW50ID09IFwiTG9naW4gU3VjY2Vzc1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdMT0dJTiBTVUNDRVNTJyk7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiVXNlcklkXCIsIHVzZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKFwiU3VjY2Vzc1wiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTE9HSU4gRkFJTEVEJyk7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwiVXNlcklkXCIsIHVzZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKFwiRmFpbHVyZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIFNhcERhdGEuTmV0d29ya0Vycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBsb2FkUm91dGVQbGFuOiBmdW5jdGlvbiAodXNlcklkLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgcklkID0gW107XG4gICAgICAgIFNhcERhdGEuQ2FsbERhdGFTZXJ2aWNlKG9Sb3V0ZVBsYW4gKyBcIidcIiArIHVzZXJJZCArIFwiJ1wiLCBmdW5jdGlvbiAoeG1sRG9jLCBzdGF0ZSkge1xuXG4gICAgICAgICAgICBpZiAoc3RhdGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgeCA9IHhtbERvYy5nZXRFbGVtZW50c0J5VGFnTmFtZShcImVudHJ5XCIpO1xuICAgICAgICAgICAgICAgIGlmICh4WzBdLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZDpNRVNTQUdFXCIpWzBdLnRleHRDb250ZW50ICE9IFwiTk9fUk9VVEVfQVNTSUdORURcIikge1xuICAgICAgICAgICAgICAgICAgICBJS01vYmlsZURCLmRiLnRyYW5zYWN0aW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHR4KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3FsID0gXCJJTlNFUlQgT1IgSUdOT1JFIElOVE8gUm91dGVQbGFuICggUm91dGVQbGFuSWQsIFJvdXRlUGxhbiwgVXNlcklkLCBJc0NvbXBsZXRlZCwgZmxhZykgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVwiO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSBbeFtpXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6Uk9VVEVQTEFOXCIpWzBdLnRleHRDb250ZW50LCB4W2ldLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZDpST1VURVBMQU5cIilbMF0udGV4dENvbnRlbnQsIHhbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkOlVTRVJcIilbMF0udGV4dENvbnRlbnQsIHhbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkOlNUQVRVU1wiKVswXS50ZXh0Q29udGVudCwgJyddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eC5leGVjdXRlU3FsKHNxbCwgcGFyYW1zKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBySWRbaV0gPSB4W2ldLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZDpST1VURVBMQU5cIilbMF0udGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlU3FsID0gXCJVcGRhdGUgUm91dGVQbGFuIHNldCBuZXdseUFkZGVkPSdZZXMnIHdoZXJlIGZsYWc9JycgYW5kIFJvdXRlUGxhbklkIE5PVCBJTiAoU2VsZWN0IFJvdXRlUGxhbklkIGZyb20gUm91dGVQbGFuQmFja3VwKVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4LmV4ZWN1dGVTcWwodXBkYXRlU3FsLCBbXSwgZnVuY3Rpb24gKCkge30sIGZ1bmN0aW9uICgpIHt9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEYXRhIEluc2VydGVkIGludG8gUm91dGVQbGFuIFRhYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IDA7IHIgPCBySWQubGVuZ3RoOyByKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIgPT0gKHJJZC5sZW5ndGggLSAxKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2FwRGF0YS5sb2FkUm91dGVEZXRhaWxzKHVzZXJJZCwgcklkW3JdLCAnMScsIGZ1bmN0aW9uIChySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTYXBEYXRhLmxvYWREZWxpdmVyeVBpY2t1cChySWQsICcxJywgZnVuY3Rpb24gKHJJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTYXBEYXRhLmxvYWRJbnZlbnRvcnkocklkLCAnMScsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2FwRGF0YS5sb2FkUm91dGVEZXRhaWxzKHVzZXJJZCwgcklkW3JdLCAnMCcsIGZ1bmN0aW9uIChySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTYXBEYXRhLmxvYWREZWxpdmVyeVBpY2t1cChySWQsICcwJywgZnVuY3Rpb24gKHJJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTYXBEYXRhLmxvYWRJbnZlbnRvcnkocklkLCAnMCcsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAkKFwiI2xvZ2lucG9wdXBcIikucG9wdXAoXCJjbG9zZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3BvcHVwT3ZlcmxheU5vUm91dGVQbGFuQXNzaWduZWRcIikucG9wdXAoXCJvcGVuXCIpO1xuICAgICAgICAgICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjcG9wdXBPdmVybGF5Tm9Sb3V0ZVBsYW5Bc3NpZ25lZFwiKS5wb3B1cChcImNsb3NlXCIpO1xuICAgICAgICAgICAgICAgICAgICB9LCAyNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ1VzZXJJZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGxvYWRSb3V0ZURldGFpbHM6IGZ1bmN0aW9uICh1c2VySWQsIHJJZCwgaW5kZXhmbGFnLCBjYWxsYmFjaykge1xuXG4gICAgICAgIHZhciBzZXJ2aWNlVVJMID0gb1JvdXRlRGV0YWlscyArIFwiJ1wiICsgdXNlcklkICsgXCInIGFuZCBST1VURVBMQU4gZXEgJ1wiICsgcklkICsgXCInXCI7XG5cbiAgICAgICAgU2FwRGF0YS5DYWxsRGF0YVNlcnZpY2Uoc2VydmljZVVSTCwgZnVuY3Rpb24gKHhtbERvYywgc3RhdGUpIHtcblxuICAgICAgICAgICAgaWYgKHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHggPSB4bWxEb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJlbnRyeVwiKVswXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImVudHJ5XCIpO1xuXG4gICAgICAgICAgICAgICAgSUtNb2JpbGVEQi5kYi50cmFuc2FjdGlvbihmdW5jdGlvbiAodHgpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgc3FsID0gXCJJTlNFUlQgT1IgSUdOT1JFIElOVE8gUm91dGVEZXRhaWxzICggSW5kZXhJZCwgUm91dGVQbGFuSWQsIFJvdXRlSWQsIFJvdXRlUGxhbl9MaW5lLCBSb3V0ZSwgTG9jYXRpb24sIE5hbWUsIENpdHksIFN0YXRlLCBPcmRlck5vLCBQbGFubmVkQXJyaXZhbCwgUGxhbm5lZERlcGFydHVyZSwgQXJyaXZhbCwgRGVwYXJ0dXJlLGZsYWcpIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPylcIjtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gWzAsIHJJZCwgcklkICsgXCJfMFwiLCB4WzBdLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZDpST1VURVBMQU5fTElORVwiKVswXS50ZXh0Q29udGVudCwgeFswXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6U1RPUERFU0NcIilbMF0udGV4dENvbnRlbnQsIHhbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkOkxPQ0FUSU9OXCIpWzBdLnRleHRDb250ZW50LCB4WzBdLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZDpMT0NBVElPTl9ERVNDXCIpWzBdLnRleHRDb250ZW50LCB4WzBdLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZDpDSVRZXCIpWzBdLnRleHRDb250ZW50LCB4WzBdLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZDpSRUdJT05cIilbMF0udGV4dENvbnRlbnQsIHhbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkOk9SREVSXCIpWzBdLnRleHRDb250ZW50LCAnLScsIGRhdGVGb3JtYXQoeFswXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6U0NIREVQXCIpWzBdLnRleHRDb250ZW50KSwgJycsICcnLCAnJ107XG4gICAgICAgICAgICAgICAgICAgIHR4LmV4ZWN1dGVTcWwoc3FsLCBwYXJhbXMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgeC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IFtpLCBySWQsIHJJZCArIFwiX1wiICsgaSwgeFtpXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6Uk9VVEVQTEFOX0xJTkVcIilbMF0udGV4dENvbnRlbnQsIHhbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkOlNUT1BERVNDXCIpWzBdLnRleHRDb250ZW50LCB4W2ldLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZDpMT0NBVElPTlwiKVswXS50ZXh0Q29udGVudCwgeFtpXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6TE9DQVRJT05fREVTQ1wiKVswXS50ZXh0Q29udGVudCwgeFtpXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6Q0lUWVwiKVswXS50ZXh0Q29udGVudCwgeFtpXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6UkVHSU9OXCIpWzBdLnRleHRDb250ZW50LCB4W2ldLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZDpPUkRFUlwiKVswXS50ZXh0Q29udGVudCwgZGF0ZUZvcm1hdCh4W2ldLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZDpTQ0hBUlZcIilbMF0udGV4dENvbnRlbnQpLCBkYXRlRm9ybWF0KHhbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkOlNDSERFUFwiKVswXS50ZXh0Q29udGVudCksICcnLCAnJywgJyddO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHguZXhlY3V0ZVNxbChzcWwsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gW3gubGVuZ3RoLCBySWQsIHJJZCArIFwiX1wiICsgeC5sZW5ndGgsIHhbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkOlJPVVRFUExBTl9MSU5FXCIpWzBdLnRleHRDb250ZW50LCB4WzBdLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZDpTVE9QREVTQ1wiKVswXS50ZXh0Q29udGVudCwgeFswXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6TE9DQVRJT05cIilbMF0udGV4dENvbnRlbnQsIHhbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkOkxPQ0FUSU9OX0RFU0NcIilbMF0udGV4dENvbnRlbnQsIHhbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkOkNJVFlcIilbMF0udGV4dENvbnRlbnQsIHhbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkOlJFR0lPTlwiKVswXS50ZXh0Q29udGVudCwgeFswXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6T1JERVJcIilbMF0udGV4dENvbnRlbnQsIGRhdGVGb3JtYXQoeFswXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6U0NIQVJWXCIpWzBdLnRleHRDb250ZW50KSwgJy0nLCAnJywgJycsICcnXTtcbiAgICAgICAgICAgICAgICAgICAgdHguZXhlY3V0ZVNxbChzcWwsIHBhcmFtcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNxbFJvdXRlUGxhblVwZGF0ZSA9IFwiVVBEQVRFIFJvdXRlUGxhbiBzZXQgUm91dGVOYW1lPT8sIENvbW1lbnRzPT8sIERyaXZlck5hbWU9PywgVHJ1Y2tNb2JpbGU9PyB3aGVyZSBSb3V0ZVBsYW5JZD0/XCI7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb21tZW50cyA9IHhtbERvYy5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6Q09NTUVOVFNcIilbMF0udGV4dENvbnRlbnQuc3BsaXQoXCI8PlwiKS5qb2luKFwiPGJyPlwiKTtcblxuICAgICAgICAgICAgICAgICAgICB0eC5leGVjdXRlU3FsKHNxbFJvdXRlUGxhblVwZGF0ZSwgW3htbERvYy5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6Uk9VVEVQTEFOX1RFWFRcIilbMF0udGV4dENvbnRlbnQsIGNvbW1lbnRzLCB4bWxEb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkOkRSSVZFUlwiKVswXS50ZXh0Q29udGVudCwgeG1sRG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZDpURUxGXCIpWzBdLnRleHRDb250ZW50LCBySWRdKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXhmbGFnID09ICcxJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVwZGF0ZVJvdXRlRGV0YWlsc1NxbCA9IFwidXBkYXRlIFJvdXRlRGV0YWlscyBzZXQgbmV3bHlBZGRlZD0nWWVzJyB3aGVyZSBmbGFnPScnIGFuZCBMb2NhdGlvbiBOT1QgSU4gKFNlbGVjdCBMb2NhdGlvbiBmcm9tIFJvdXRlRGV0YWlsc0JhY2t1cCkgYW5kIFJvdXRlUGxhbklkIE5PVCBJTiAoU2VsZWN0IFJvdXRlUGxhbklkIGZyb20gUm91dGVQbGFuIHdoZXJlIG5ld2x5QWRkZWQ9J1llcycpXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eC5leGVjdXRlU3FsKHVwZGF0ZVJvdXRlRGV0YWlsc1NxbCwgW10sIGZ1bmN0aW9uICgpIHt9LCBmdW5jdGlvbiAoKSB7fSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEYXRhIEluc2VydGVkIGludG8gUm91dGVEZXRhaWxzIFRhYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUm91dGVQbGFuIFRhYmxlIFVwZGF0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIElLTW9iaWxlREIuYmFzZURhdGFTeW5jTG9nKCdSb3V0ZVBsYW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIElLTW9iaWxlREIuYmFzZURhdGFTeW5jTG9nKCdSb3V0ZURldGFpbHMnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhySWQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXhmbGFnID09ICcxJykge1xuICAgICAgICAgICAgICAgICAgICBJS01vYmlsZURCLmRiLnRyYW5zYWN0aW9uKGZ1bmN0aW9uICh0eCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVwZGF0ZVJvdXRlRGV0YWlsc1NxbCA9IFwidXBkYXRlIFJvdXRlRGV0YWlscyBzZXQgbmV3bHlBZGRlZD0nWWVzJyB3aGVyZSBmbGFnPScnIGFuZCBMb2NhdGlvbiBOT1QgSU4gKFNlbGVjdCBMb2NhdGlvbiBmcm9tIFJvdXRlRGV0YWlsc0JhY2t1cCkgYW5kIFJvdXRlUGxhbklkIE5PVCBJTiAoU2VsZWN0IFJvdXRlUGxhbklkIGZyb20gUm91dGVQbGFuIHdoZXJlIG5ld2x5QWRkZWQ9J1llcycpXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eC5leGVjdXRlU3FsKHVwZGF0ZVJvdXRlRGV0YWlsc1NxbCwgW10sIGZ1bmN0aW9uICgpIHt9LCBmdW5jdGlvbiAoKSB7fSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRGF0YSBJbnNlcnRlZCBpbnRvIFJvdXRlRGV0YWlscyBUYWJsZScpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUm91dGVQbGFuIFRhYmxlIFVwZGF0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgSUtNb2JpbGVEQi5iYXNlRGF0YVN5bmNMb2coJ1JvdXRlUGxhbicpO1xuICAgICAgICAgICAgICAgICAgICBJS01vYmlsZURCLmJhc2VEYXRhU3luY0xvZygnUm91dGVEZXRhaWxzJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBsb2FkRGVsaXZlcnlQaWNrdXA6IGZ1bmN0aW9uIChySWQsIGZsYWcsIGNhbGxiYWNrKSB7XG5cbiAgICAgICAgdmFyIHNlcnZpY2VVUkwgPSBvRGVsaXZlcnlQaWNrdXAgKyBcIidcIiArIHJJZCArIFwiJyYkZXhwYW5kPVN0b3BpdG1cIjtcbiAgICAgICAgU2FwRGF0YS5DYWxsRGF0YVNlcnZpY2Uoc2VydmljZVVSTCwgZnVuY3Rpb24gKHhtbERvYywgc3RhdGUpIHtcblxuICAgICAgICAgICAgaWYgKHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHcgPSB4bWxEb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJmZWVkXCIpWzBdLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZmVlZFwiKTtcbiAgICAgICAgICAgICAgICAvL2FsZXJ0KHcubGVuZ3RoKTtcblxuICAgICAgICAgICAgICAgIHZhciB6ID0geG1sRG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZmVlZFwiKVswXTtcblxuICAgICAgICAgICAgICAgIElLTW9iaWxlREIuZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24gKHR4KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzcWwgPSBcIklOU0VSVCBPUiBJR05PUkUgSU5UTyBEZWxpdmVyeVBpY2t1cCAoIE9yZGVyTm8sIExpbmVObywgSXRlbUlkLCBJdGVtLCBEZXNjcmlwdGlvbiwgTWF0ZXJpYWxHcnAsIE1hdGVyaWFsRGVzYywgRXhwZWN0ZWRRdHksIENvbmZpcm1lZFF0eSwgVHlwZSwgUGlja3VwQ29tbWVudHMpIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPylcIjtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgc3FsUm91dGVEZXRhaWxzVXBkYXRlID0gXCJVUERBVEUgUm91dGVEZXRhaWxzIHNldCBTcGVjaWFsSW5zdHJ1Y3Rpb25zPT8gd2hlcmUgUm91dGVQbGFuSWQ9PyBhbmQgT3JkZXJObz0/IGFuZCBmbGFnPScnXCI7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3Lmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IHdbal0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJlbnRyeVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoeC5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IFt4W2ldLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZDpPUkRFUlwiKVswXS50ZXh0Q29udGVudCwgeFtpXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6SVRFTV9OVU1cIilbMF0udGV4dENvbnRlbnQsIHhbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkOk9SREVSXCIpWzBdLnRleHRDb250ZW50ICsgXCJfXCIgKyBpLCB4W2ldLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZDpNQVRFUklBTFwiKVswXS50ZXh0Q29udGVudCwgeFtpXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6TUFUREVTQ1wiKVswXS50ZXh0Q29udGVudCwgeFtpXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6TUFUR1JPVVBcIilbMF0udGV4dENvbnRlbnQsIHhbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkOk1BVEdSUERFU1wiKVswXS50ZXh0Q29udGVudCwgeFtpXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6UVVBTlRJVFlcIilbMF0udGV4dENvbnRlbnQsIHhbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkOkNPTkZfUVVBTlwiKVswXS50ZXh0Q29udGVudCwgeFtpXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6RkxBR1wiKVswXS50ZXh0Q29udGVudCwgeFtpXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6U0VSSUFMXCIpWzBdLnRleHRDb250ZW50XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eC5leGVjdXRlU3FsKHNxbCwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdHguZXhlY3V0ZVNxbChzcWxSb3V0ZURldGFpbHNVcGRhdGUsIFt6LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZDpERUxWX1RYVFwiKVtqXS50ZXh0Q29udGVudCArIFwiIFwiICsgei5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6SERSX1RYVFwiKVtqXS50ZXh0Q29udGVudCwgcklkLCB4WzBdLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZDpPUkRFUlwiKVswXS50ZXh0Q29udGVudF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHVwZGF0ZURlbGl2ZXJ5UGlja3VwU3FsID0gXCJVcGRhdGUgRGVsaXZlcnlQaWNrdXAgc2V0IG5ld2x5QWRkZWQ9J1llcycgd2hlcmUgZmxhZyBpcyBudWxsIGFuZCBOT1QgRVhJU1RTIChzZWxlY3QgT3JkZXJObyxMaW5lTm8gZnJvbSBEZWxpdmVyeVBpY2t1cEJhY2t1cCB3aGVyZSBEZWxpdmVyeVBpY2t1cC5PcmRlck5vPURlbGl2ZXJ5UGlja3VwQmFja3VwLk9yZGVyTm8gYW5kIERlbGl2ZXJ5UGlja3VwLkxpbmVObz1EZWxpdmVyeVBpY2t1cEJhY2t1cC5MaW5lTm8pIGFuZCBPcmRlck5vIE5PVCBJTiAoU2VsZWN0IFJELk9yZGVyTm8gZnJvbSBSb3V0ZURldGFpbHMgYXMgUkQgam9pbiBSb3V0ZVBsYW4gYXMgUlAgb24gUkQuUm91dGVQbGFuSWQ9UlAuUm91dGVQbGFuSWQgd2hlcmUgUlAubmV3bHlBZGRlZD0nWWVzJyBhbmQgUkQuT3JkZXJObyE9JycpXCI7XG4gICAgICAgICAgICAgICAgICAgIHR4LmV4ZWN1dGVTcWwodXBkYXRlRGVsaXZlcnlQaWNrdXBTcWwsIFtdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlUm91dGVEZXRhaWxzU3FsID0gXCJ1cGRhdGUgUm91dGVEZXRhaWxzIHNldCBuZXdseUFkZGVkPSdZZXMnIHdoZXJlIFJvdXRlUGxhbklkPSdcIiArIHJJZCArIFwiJyBhbmQgT3JkZXJObyBpcyBub3QgbnVsbCBhbmQgT3JkZXJObyBJTiAoU2VsZWN0IE9yZGVyTm8gZnJvbSBEZWxpdmVyeVBpY2t1cCB3aGVyZSBuZXdseUFkZGVkPSdZZXMnIGdyb3VwIGJ5IE9yZGVyTm8pXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eC5leGVjdXRlU3FsKHVwZGF0ZVJvdXRlRGV0YWlsc1NxbCwgW10sIGZ1bmN0aW9uICgpIHt9LCBmdW5jdGlvbiAoKSB7fSk7XG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHt9KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZmxhZyA9PSAnMScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEYXRhIEluc2VydGVkIGludG8gRGVsaXZlcnlQaWNrdXAgVGFibGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIElLTW9iaWxlREIuYmFzZURhdGFTeW5jTG9nKCdEZWxpdmVyeVBpY2t1cCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJJZCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChmbGFnID09ICcxJykge1xuICAgICAgICAgICAgICAgICAgICBJS01vYmlsZURCLmRiLnRyYW5zYWN0aW9uKGZ1bmN0aW9uICh0eCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVwZGF0ZURlbGl2ZXJ5UGlja3VwU3FsID0gXCJVcGRhdGUgRGVsaXZlcnlQaWNrdXAgc2V0IG5ld2x5QWRkZWQ9J1llcycgd2hlcmUgZmxhZyBpcyBudWxsIGFuZCBOT1QgRVhJU1RTIChzZWxlY3QgT3JkZXJObyxMaW5lTm8gZnJvbSBEZWxpdmVyeVBpY2t1cEJhY2t1cCB3aGVyZSBEZWxpdmVyeVBpY2t1cC5PcmRlck5vPURlbGl2ZXJ5UGlja3VwQmFja3VwLk9yZGVyTm8gYW5kIERlbGl2ZXJ5UGlja3VwLkxpbmVObz1EZWxpdmVyeVBpY2t1cEJhY2t1cC5MaW5lTm8pIGFuZCBPcmRlck5vIE5PVCBJTiAoU2VsZWN0IFJELk9yZGVyTm8gZnJvbSBSb3V0ZURldGFpbHMgYXMgUkQgam9pbiBSb3V0ZVBsYW4gYXMgUlAgb24gUkQuUm91dGVQbGFuSWQ9UlAuUm91dGVQbGFuSWQgd2hlcmUgUlAubmV3bHlBZGRlZD0nWWVzJyBhbmQgUkQuT3JkZXJObyE9JycpXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eC5leGVjdXRlU3FsKHVwZGF0ZURlbGl2ZXJ5UGlja3VwU3FsLCBbXSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cGRhdGVSb3V0ZURldGFpbHNTcWwgPSBcInVwZGF0ZSBSb3V0ZURldGFpbHMgc2V0IG5ld2x5QWRkZWQ9J1llcycgd2hlcmUgUm91dGVQbGFuSWQ9J1wiICsgcklkICsgXCInIGFuZCBPcmRlck5vIGlzIG5vdCBudWxsIGFuZCBPcmRlck5vIElOIChTZWxlY3QgT3JkZXJObyBmcm9tIERlbGl2ZXJ5UGlja3VwIHdoZXJlIG5ld2x5QWRkZWQ9J1llcycgZ3JvdXAgYnkgT3JkZXJObylcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eC5leGVjdXRlU3FsKHVwZGF0ZVJvdXRlRGV0YWlsc1NxbCwgW10sIGZ1bmN0aW9uICgpIHt9LCBmdW5jdGlvbiAoKSB7fSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7fSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRGF0YSBJbnNlcnRlZCBpbnRvIERlbGl2ZXJ5UGlja3VwIFRhYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgIElLTW9iaWxlREIuYmFzZURhdGFTeW5jTG9nKCdEZWxpdmVyeVBpY2t1cCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYWxsYmFjayhySWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgbG9hZEludmVudG9yeTogZnVuY3Rpb24gKHJJZCwgZmxhZywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHNlcnZpY2VVUkwgPSBvSW52ZW50b3J5ICsgXCInXCIgKyBySWQgKyBcIidcIjtcblxuICAgICAgICBTYXBEYXRhLkNhbGxEYXRhU2VydmljZShzZXJ2aWNlVVJMLCBmdW5jdGlvbiAoeG1sRG9jLCBzdGF0ZSkge1xuICAgICAgICAgICAgaWYgKHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHggPSB4bWxEb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJlbnRyeVwiKTtcblxuICAgICAgICAgICAgICAgIElLTW9iaWxlREIuZGIudHJhbnNhY3Rpb24oXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh0eCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNxbCA9IFwiSU5TRVJUIE9SIElHTk9SRSBJTlRPIEludmVudG9yeSAoIFJvdXRlUGxhbklkLCBJdGVtSWQsIEl0ZW0sIERlc2NyaXB0aW9uLCBDb21taXRlZFF1YW50aXR5LCBUb3RhbFF1YW50aXR5LCBVT00sIEJhdGNoTm8sIFNlcmlhbE5vLCBJbnZlbnRvcnlUeXBlLCBMb2NhdGlvbikgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/KVwiO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHgubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gW3hbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkOlJPVVRFUExBTlwiKVswXS50ZXh0Q29udGVudCwgeFtpXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6Uk9VVEVQTEFOXCIpWzBdLnRleHRDb250ZW50ICsgXCJfXCIgKyBpLCB4W2ldLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZDpNQVRFUklBTFwiKVswXS50ZXh0Q29udGVudCwgeFtpXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6TUFUREVTQ1wiKVswXS50ZXh0Q29udGVudCwgeFtpXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6UVVBTlRJVFlcIilbMF0udGV4dENvbnRlbnQsIHhbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkOkNPTkZfUVVBTlwiKVswXS50ZXh0Q29udGVudCwgeFtpXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6VU9NXCIpWzBdLnRleHRDb250ZW50LCB4W2ldLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiZDpCQVRDSF9OVU1cIilbMF0udGV4dENvbnRlbnQsIHhbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJkOlNFUklBTFwiKVswXS50ZXh0Q29udGVudCwgeFtpXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6RkxBR1wiKVswXS50ZXh0Q29udGVudCwgeFtpXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImQ6TE9DQVRJT05cIilbMF0udGV4dENvbnRlbnRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4LmV4ZWN1dGVTcWwoc3FsLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmxhZyA9PSAnMScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRGF0YSBJbnNlcnRlZCBpbnRvIEludmVudG9yeSBUYWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIElLTW9iaWxlREIuYmFzZURhdGFTeW5jTG9nKCdJbnZlbnRvcnknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGZsYWcgPT0gJzEnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEYXRhIEluc2VydGVkIGludG8gSW52ZW50b3J5IFRhYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgIElLTW9iaWxlREIuYmFzZURhdGFTeW5jTG9nKCdJbnZlbnRvcnknKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBnZXRDU1JGVG9rZW46IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuXG4gICAgICAgIC8vYWxlcnQoXCJJbiBDU1JGIFRva2VuXCIpO1xuICAgICAgICB2YXIgcmVxdWVzdENTUiA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICByZXF1ZXN0Q1NSLm9wZW4oXCJHRVRcIiwgb0luVHJhbnNmZXIsIHRydWUpO1xuICAgICAgICByZXF1ZXN0Q1NSLnNldFJlcXVlc3RIZWFkZXIoJ0F1dGhvcml6YXRpb24nLCBzdG9yZU9iamVjdC5hdXRoKTtcbiAgICAgICAgcmVxdWVzdENTUi5zZXRSZXF1ZXN0SGVhZGVyKCdYLUNTUkYtVG9rZW4nLCAnRmV0Y2gnKTtcbiAgICAgICAgcmVxdWVzdENTUi50aW1lb3V0ID0gc3RvcmVPYmplY3Qub0RhdGFUaW1lT3V0O1xuXG4gICAgICAgIHJlcXVlc3RDU1Iub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy9DYWxsIGEgZnVuY3Rpb24gd2hlbiB0aGUgc3RhdGUgY2hhbmdlcy5cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0Q1NSLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgICAgICAgICAgIC8vYWxlcnQocmVxdWVzdENTUi5nZXRSZXNwb25zZUhlYWRlcigneC1jc3JmLXRva2VuJykpO1xuICAgICAgICAgICAgICAgIHZhciBhZGF0YSA9IHJlcXVlc3RDU1IuZ2V0UmVzcG9uc2VIZWFkZXIoJ3gtY3NyZi10b2tlbicpO1xuICAgICAgICAgICAgICAgIHN0b3JlT2JqZWN0LkNTUktleSA9IGFkYXRhO1xuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2ZvdW5kIENTUmYga2V5IDonICsgc3RvcmVPYmplY3QuQ1NSS2V5KTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXF1ZXN0Q1NSLnNlbmQoKTtcbiAgICB9LFxuXG4gICAgdXBkYXRlUm91dGVQbGFuSGVhZGVyU3RhdHVzOiBmdW5jdGlvbiAoZGF0YU9iaiwgc3RhdHVzLCBjYWxsYmFjaykge1xuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiU3RhcnRlZCB1cGRhdGVSb3V0ZVBsYW5IZWFkZXJTdGF0dXNcIik7XG5cbiAgICAgICAgU2FwRGF0YS5nZXRDU1JGVG9rZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlcXVlc3RyZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgIHJlcXVlc3RyZXEub3BlbihcIlBVVFwiLCBvVXBkYXRlUm91dGVQbGFuICsgXCIoJ1wiICsgZGF0YU9ialswXS5Sb3V0ZVBsYW5JZCArIFwiJylcIiwgdHJ1ZSk7XG4gICAgICAgICAgICAvL2FsZXJ0KHN0b3JlT2JqZWN0LkNTUktleSk7XG4gICAgICAgICAgICByZXF1ZXN0cmVxLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9hdG9tK3htbCcpO1xuICAgICAgICAgICAgcmVxdWVzdHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdBdXRob3JpemF0aW9uJywgc3RvcmVPYmplY3QuYXV0aCk7XG4gICAgICAgICAgICByZXF1ZXN0cmVxLnNldFJlcXVlc3RIZWFkZXIoJ1gtQ1NSRi1Ub2tlbicsIHN0b3JlT2JqZWN0LkNTUktleSk7XG4gICAgICAgICAgICByZXF1ZXN0cmVxLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9hdG9tK3htbCxhcHBsaWNhdGlvbi9hdG9tc3ZjK3htbCxhcHBsaWNhdGlvbi94bWwnKTtcbiAgICAgICAgICAgIHJlcXVlc3RyZXEudGltZW91dCA9IHN0b3JlT2JqZWN0Lm9EYXRhVGltZU91dDtcblxuICAgICAgICAgICAgcmVxdWVzdHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy9DYWxsIGEgZnVuY3Rpb24gd2hlbiB0aGUgc3RhdGUgY2hhbmdlcy5cbiAgICAgICAgICAgICAgICBpZiAocmVxdWVzdHJlcS5yZWFkeVN0YXRlID09IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9hbGVydCgnSGVhZGVyIFJlcXVlc3QgU3RhdHVzOjogJysgcmVxdWVzdHJlcS5zdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWVzdHJlcS5zdGF0dXMgPT0gMjAwIHx8IHJlcXVlc3RyZXEuc3RhdHVzID09IDIwMSB8fCByZXF1ZXN0cmVxLnN0YXR1cyA9PSAyMDQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoJ1Bvc3RIZWFkZXInICsgcmVxdWVzdHJlcS5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KCdQb3N0IFN0YXR1cycrIHJlcXVlc3RyZXEuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoJ0hUVFAgZXJyb3IgJyArIHJlcXVlc3RyZXEuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8veG1sRG9jID0gcmVxdWVzdHJlcS5yZXNwb25zZVhNTDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUm91dGUgUGxhbiBIZWFkZXIgU3RhdHVzIFVwZGF0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYlF1ZXJpZXMudXBkYXRlRmxhZyhcIlVwZGF0ZSBTeW5jRGV0YWlscyBzZXQgSGVhZGVyU3RhdHVzRmxhZz0nMScgd2hlcmUgUm91dGVJZD0nXCIgKyBkYXRhT2JqWzBdLlJvdXRlSWQgKyBcIidcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydChcIkVycm9yIGluIE5ldHdvcmtcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVuZCB3aXRoIEVycm9yIHVwZGF0ZVJvdXRlUGxhbkhlYWRlclN0YXR1c1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFNhcERhdGEuVXBkYXRlRXJyb3IocmVxdWVzdHJlcS5zdGF0dXMgKyBcIiA6IEVuZCB3aXRoIEVycm9yIHVwZGF0ZVJvdXRlUGxhbkhlYWRlclN0YXR1c1wiKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIHJldHVybnZhbCA9ICc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJ1dGYtOFwiPz4nICtcbiAgICAgICAgICAgICAgICAnPGF0b206ZW50cnkgeG1sbnM6YXRvbSA9XCJodHRwOi8vd3d3LnczLm9yZy8yMDA1L0F0b21cIiB4bWxuczptPVwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9hZG8vMjAwNy8wOC9kYXRhc2VydmljZXMvbWV0YWRhdGFcIiB4bWxuczpkPVwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9hZG8vMjAwNy8wOC9kYXRhc2VydmljZXNcIiB4bWw6YmFzZT1cIicgKyBvUm91dGVQbGFuU3J2ICsgJ1wiPicgK1xuICAgICAgICAgICAgICAgICc8YXRvbTpjb250ZW50IHR5cGU9XCJhcHBsaWNhdGlvbi94bWxcIj4nICtcbiAgICAgICAgICAgICAgICAnPG06cHJvcGVydGllcz4nICtcbiAgICAgICAgICAgICAgICAnPGQ6Uk9VVEVQTEFOPicgKyBkYXRhT2JqWzBdLlJvdXRlUGxhbklkICsgJzwvZDpST1VURVBMQU4+JyArXG4gICAgICAgICAgICAgICAgJzxkOlJPVVRFUExBTl9MSU5FPjwvZDpST1VURVBMQU5fTElORT4nICtcbiAgICAgICAgICAgICAgICAnPGQ6Uk9VVEVQTEFOX1NUQVQ+JyArIHN0YXR1cyArICc8L2Q6Uk9VVEVQTEFOX1NUQVQ+JyArXG4gICAgICAgICAgICAgICAgJzxkOlNUQVJUX09ETz4nICsgZGF0YU9ialswXS5PZG9tZXRlclN0YXJ0UmVhZGluZyArICc8L2Q6U1RBUlRfT0RPPicgK1xuICAgICAgICAgICAgICAgICc8ZDpFTkRfT0RPPicgKyAoZGF0YU9ialswXS5PZG9tZXRlckVuZFJlYWRpbmcgPyBkYXRhT2JqWzBdLk9kb21ldGVyRW5kUmVhZGluZyA6ICcwJykgKyAnPC9kOkVORF9PRE8+JyArXG4gICAgICAgICAgICAgICAgJzxkOkhFQURFUj5YPC9kOkhFQURFUj4nICtcbiAgICAgICAgICAgICAgICAnPC9tOnByb3BlcnRpZXM+JyArXG4gICAgICAgICAgICAgICAgJzwvYXRvbTpjb250ZW50PicgK1xuICAgICAgICAgICAgICAgICc8L2F0b206ZW50cnk+JztcblxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXR1cm52YWwpO1xuICAgICAgICAgICAgcmVxdWVzdHJlcS5zZW5kKHJldHVybnZhbCk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICB1cGRhdGVSb3V0ZVBsYW5MaW5lU3RhdHVzOiBmdW5jdGlvbiAoZGF0YU9iaiwgc3RhdHVzLCBjYWxsYmFjaykge1xuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiU3RhcnRlZCB1cGRhdGVSb3V0ZVBsYW5MaW5lU3RhdHVzXCIpO1xuXG4gICAgICAgIFNhcERhdGEuZ2V0Q1NSRlRva2VuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXF1ZXN0cmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICByZXF1ZXN0cmVxLm9wZW4oXCJQVVRcIiwgb1VwZGF0ZVJvdXRlUGxhbiArIFwiKCdcIiArIGRhdGFPYmpbMF0uUm91dGVQbGFuSWQgKyBcIicpXCIsIHRydWUpO1xuXG4gICAgICAgICAgICByZXF1ZXN0cmVxLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9hdG9tK3htbCcpO1xuICAgICAgICAgICAgcmVxdWVzdHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdBdXRob3JpemF0aW9uJywgc3RvcmVPYmplY3QuYXV0aCk7XG4gICAgICAgICAgICByZXF1ZXN0cmVxLnNldFJlcXVlc3RIZWFkZXIoJ1gtQ1NSRi1Ub2tlbicsIHN0b3JlT2JqZWN0LkNTUktleSk7XG4gICAgICAgICAgICByZXF1ZXN0cmVxLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9hdG9tK3htbCxhcHBsaWNhdGlvbi9hdG9tc3ZjK3htbCxhcHBsaWNhdGlvbi94bWwnKTtcbiAgICAgICAgICAgIHJlcXVlc3RyZXEudGltZW91dCA9IHN0b3JlT2JqZWN0Lm9EYXRhVGltZU91dDtcblxuICAgICAgICAgICAgcmVxdWVzdHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy9DYWxsIGEgZnVuY3Rpb24gd2hlbiB0aGUgc3RhdGUgY2hhbmdlcy5cbiAgICAgICAgICAgICAgICBpZiAocmVxdWVzdHJlcS5yZWFkeVN0YXRlID09IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9hbGVydCgnTGluZSBSZXF1ZXN0IFN0YXR1czo6ICcrIHJlcXVlc3RyZXEuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVlc3RyZXEuc3RhdHVzID09IDIwMCB8fCByZXF1ZXN0cmVxLnN0YXR1cyA9PSAyMDEgfHwgcmVxdWVzdHJlcS5zdGF0dXMgPT0gMjA0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnUG9zdEhlYWRlcicgKyByZXF1ZXN0cmVxLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdQb3N0IFN0YXR1cycrIHJlcXVlc3RyZXEuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdIVFRQIGVycm9yICcgKyByZXF1ZXN0cmVxLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL3htbERvYyA9IHJlcXVlc3RyZXEucmVzcG9uc2VYTUw7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJvdXRlIFBsYW4gTGluZSBTdGF0dXMgVXBkYXRlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiUXVlcmllcy51cGRhdGVGbGFnKFwiVXBkYXRlIFN5bmNEZXRhaWxzIHNldCBMaW5lU3RhdHVzRmxhZz0nMScgd2hlcmUgUm91dGVJZD0nXCIgKyBkYXRhT2JqWzBdLlJvdXRlSWQgKyBcIidcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydChcIkVycm9yIGluIE5ldHdvcmtcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVuZCB3aXRoIEVycm9yIHVwZGF0ZVJvdXRlUGxhbkxpbmVTdGF0dXNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBTYXBEYXRhLlVwZGF0ZUVycm9yKHJlcXVlc3RyZXEuc3RhdHVzICsgXCIgOiBFbmQgd2l0aCBFcnJvciB1cGRhdGVSb3V0ZVBsYW5MaW5lU3RhdHVzXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGJRdWVyaWVzLnVwZGF0ZUZsYWcoXCJVcGRhdGUgU3luY0RldGFpbHMgc2V0IExpbmVTdGF0dXNGbGFnPScwJyB3aGVyZSBSb3V0ZUlkPSdcIiArIGRhdGFPYmpbMF0uUm91dGVJZCArIFwiJ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgcmV0dXJudmFsID0gJzw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCI/PicgK1xuICAgICAgICAgICAgICAgICc8YXRvbTplbnRyeSB4bWxuczphdG9tPVwiaHR0cDovL3d3dy53My5vcmcvMjAwNS9BdG9tXCIgeG1sbnM6ZD1cImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vYWRvLzIwMDcvMDgvZGF0YXNlcnZpY2VzXCIgeG1sbnM6bT1cImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vYWRvLzIwMDcvMDgvZGF0YXNlcnZpY2VzL21ldGFkYXRhXCIgeG1sOmJhc2U9XCInICsgb1JvdXRlUGxhblNydiArICdcIj4nICtcbiAgICAgICAgICAgICAgICAnPGF0b206Y29udGVudCB0eXBlPVwiYXBwbGljYXRpb24veG1sXCI+JyArXG4gICAgICAgICAgICAgICAgJzxtOnByb3BlcnRpZXM+JyArXG4gICAgICAgICAgICAgICAgJzxkOlJPVVRFUExBTj4nICsgZGF0YU9ialswXS5Sb3V0ZVBsYW5JZCArICc8L2Q6Uk9VVEVQTEFOPicgK1xuICAgICAgICAgICAgICAgICc8ZDpST1VURVBMQU5fTElORT4nICsgZGF0YU9ialswXS5Sb3V0ZVBsYW5fTGluZSArICc8L2Q6Uk9VVEVQTEFOX0xJTkU+JyArXG4gICAgICAgICAgICAgICAgJzxkOlJPVVRFUExBTl9TVEFUPicgKyBzdGF0dXMgKyAnPC9kOlJPVVRFUExBTl9TVEFUPicgK1xuICAgICAgICAgICAgICAgICc8ZDpIRUFERVIgLz4nICtcbiAgICAgICAgICAgICAgICAnPC9tOnByb3BlcnRpZXM+JyArXG4gICAgICAgICAgICAgICAgJzwvYXRvbTpjb250ZW50PicgK1xuICAgICAgICAgICAgICAgICc8L2F0b206ZW50cnk+JztcblxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXR1cm52YWwpO1xuICAgICAgICAgICAgcmVxdWVzdHJlcS5zZW5kKHJldHVybnZhbCk7XG5cbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHVwZGF0ZUFycml2YWxEZXBhcnR1cmU6IGZ1bmN0aW9uIChkYXRhT2JqLCBjYWxsYmFjaykge1xuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiU3RhcnRlZCB1cGRhdGVBcnJpdmFsRGVwYXJ0dXJlXCIpO1xuXG4gICAgICAgIFNhcERhdGEuZ2V0Q1NSRlRva2VuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXF1ZXN0cmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICByZXF1ZXN0cmVxLm9wZW4oXCJQVVRcIiwgb1VwZGF0ZUFycml2YWxEZXBhcnR1cmUgKyBcIihST1VURVBMQU49J1wiICsgZGF0YU9ialswXS5Sb3V0ZVBsYW5JZCArIFwiJyxST1VURVBMQU5fTElORT0nXCIgKyBkYXRhT2JqWzBdLlJvdXRlUGxhbl9MaW5lICsgXCInKVwiLCB0cnVlKTtcblxuICAgICAgICAgICAgcmVxdWVzdHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vYXRvbSt4bWwnKTtcbiAgICAgICAgICAgIHJlcXVlc3RyZXEuc2V0UmVxdWVzdEhlYWRlcignQXV0aG9yaXphdGlvbicsIHN0b3JlT2JqZWN0LmF1dGgpO1xuICAgICAgICAgICAgcmVxdWVzdHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdYLUNTUkYtVG9rZW4nLCBzdG9yZU9iamVjdC5DU1JLZXkpO1xuICAgICAgICAgICAgcmVxdWVzdHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAnYXBwbGljYXRpb24vYXRvbSt4bWwsYXBwbGljYXRpb24vYXRvbXN2Yyt4bWwsYXBwbGljYXRpb24veG1sJyk7XG4gICAgICAgICAgICByZXF1ZXN0cmVxLnRpbWVvdXQgPSBzdG9yZU9iamVjdC5vRGF0YVRpbWVPdXQ7XG5cbiAgICAgICAgICAgIHJlcXVlc3RyZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vQ2FsbCBhIGZ1bmN0aW9uIHdoZW4gdGhlIHN0YXRlIGNoYW5nZXMuXG4gICAgICAgICAgICAgICAgaWYgKHJlcXVlc3RyZXEucmVhZHlTdGF0ZSA9PSA0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBcnJpdmFsL0RlcGFydHVyZSBSZXF1ZXN0IFN0YXR1czo6ICcgKyByZXF1ZXN0cmVxLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0cmVxLnN0YXR1cyA9PSAyMDAgfHwgcmVxdWVzdHJlcS5zdGF0dXMgPT0gMjAxIHx8IHJlcXVlc3RyZXEuc3RhdHVzID09IDIwNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ1Bvc3RIZWFkZXInICsgcmVxdWVzdHJlcS5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnUG9zdCBTdGF0dXMnKyByZXF1ZXN0cmVxLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnSFRUUCBlcnJvciAnICsgcmVxdWVzdHJlcS5zdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgeG1sRG9jID0gcmVxdWVzdHJlcS5yZXNwb25zZVhNTDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHhtbERvYyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFycml2YWwgRGVwYXJ0dXJlIFVwZGF0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYlF1ZXJpZXMudXBkYXRlRmxhZyhcIlVwZGF0ZSBTeW5jRGV0YWlscyBzZXQgQXJyRGVwRmxhZz0nMScgd2hlcmUgUm91dGVJZD0nXCIgKyBkYXRhT2JqWzBdLlJvdXRlSWQgKyBcIidcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFbmQgd2l0aCBFcnJvciB1cGRhdGVBcnJpdmFsRGVwYXJ0dXJlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydChcIkVycm9yIGluIE5ldHdvcmtcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBTYXBEYXRhLlVwZGF0ZUVycm9yKHJlcXVlc3RyZXEuc3RhdHVzICsgXCIgOiBFbmQgd2l0aCBFcnJvciB1cGRhdGVBcnJpdmFsRGVwYXJ0dXJlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGJRdWVyaWVzLnVwZGF0ZUZsYWcoXCJVcGRhdGUgU3luY0RldGFpbHMgc2V0IEFyckRlcEZsYWc9JzAnIHdoZXJlIFJvdXRlSWQ9J1wiICsgZGF0YU9ialswXS5Sb3V0ZUlkICsgXCInXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIHJldHVybnZhbCA9ICc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiPz4nICtcbiAgICAgICAgICAgICAgICAnPGF0b206ZW50cnkgeG1sbnM6YXRvbT1cImh0dHA6Ly93d3cudzMub3JnLzIwMDUvQXRvbVwiIHhtbG5zOmQ9XCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL2Fkby8yMDA3LzA4L2RhdGFzZXJ2aWNlc1wiIHhtbG5zOm09XCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL2Fkby8yMDA3LzA4L2RhdGFzZXJ2aWNlcy9tZXRhZGF0YVwiIHhtbDpiYXNlPVwiJyArIG9Sb3V0ZVBsYW5TcnYgKyAnXCI+JyArXG4gICAgICAgICAgICAgICAgJzxhdG9tOmNvbnRlbnQgdHlwZT1cImFwcGxpY2F0aW9uL2F0b20reG1sXCI+JyArXG4gICAgICAgICAgICAgICAgJzxtOnByb3BlcnRpZXM+JyArXG4gICAgICAgICAgICAgICAgJzxkOlJPVVRFUExBTj4nICsgZGF0YU9ialswXS5Sb3V0ZVBsYW5JZCArICc8L2Q6Uk9VVEVQTEFOPicgK1xuICAgICAgICAgICAgICAgICc8ZDpST1VURVBMQU5fTElORT4nICsgZGF0YU9ialswXS5Sb3V0ZVBsYW5fTGluZSArICc8L2Q6Uk9VVEVQTEFOX0xJTkU+JyArXG4gICAgICAgICAgICAgICAgJzxkOkRPQ1VNRU5UX05VTUIgLz4nICtcbiAgICAgICAgICAgICAgICAnPGQ6RU5UUllfTlVNQj48L2Q6RU5UUllfTlVNQj4nICtcbiAgICAgICAgICAgICAgICAnPGQ6Q1VTVE9NRVJfTlVNQj4nICsgZGF0YU9ialswXS5Mb2NhdGlvbiArICc8L2Q6Q1VTVE9NRVJfTlVNQj4nICtcbiAgICAgICAgICAgICAgICAnPGQ6VVBEVEQ+MDwvZDpVUERURD4nICtcbiAgICAgICAgICAgICAgICAnPGQ6QUNUQVJWRFQ+JyArIHNlbmREYXRlKGRhdGFPYmpbMF0uQXJyaXZhbCkgKyAnPC9kOkFDVEFSVkRUPicgK1xuICAgICAgICAgICAgICAgICc8ZDpBQ1RBUlZUTT4nICsgc2VuZFRpbWUoZGF0YU9ialswXS5BcnJpdmFsKSArICc8L2Q6QUNUQVJWVE0+JyArXG4gICAgICAgICAgICAgICAgJzxkOkFDVERFUERUPicgKyBzZW5kRGF0ZShkYXRhT2JqWzBdLkRlcGFydHVyZSkgKyAnPC9kOkFDVERFUERUPicgK1xuICAgICAgICAgICAgICAgICc8ZDpBQ1RERVBUTT4nICsgc2VuZFRpbWUoZGF0YU9ialswXS5EZXBhcnR1cmUpICsgJzwvZDpBQ1RERVBUTT4nICtcbiAgICAgICAgICAgICAgICAnPGQ6TUVTU0FHRSAvPicgK1xuICAgICAgICAgICAgICAgICc8ZDpGTEFHPlg8L2Q6RkxBRz4nICtcbiAgICAgICAgICAgICAgICAnPC9tOnByb3BlcnRpZXM+JyArXG4gICAgICAgICAgICAgICAgJzwvYXRvbTpjb250ZW50PicgK1xuICAgICAgICAgICAgICAgICc8L2F0b206ZW50cnk+JztcblxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXR1cm52YWwpO1xuICAgICAgICAgICAgcmVxdWVzdHJlcS5zZW5kKHJldHVybnZhbCk7XG4gICAgICAgIH0pO1xuXG5cbiAgICB9LFxuXG4gICAgdXBkYXRlSW5UcmFuc2ZlcjogZnVuY3Rpb24gKGN1c3RvbWVyTmFtZSwgY3VzdG9tZXJTaWduYXR1cmUsIHJvdXRlUGxhbkxpbmUsIG9yZGVyTm8sIGRhdGFPYmpBcnIsIGNhbGxiYWNrKSB7XG5cbiAgICAgICAgY29uc29sZS5sb2coXCJTdGFydCB1cGRhdGVJblRyYW5zZmVyXCIpO1xuXG4gICAgICAgIFNhcERhdGEuZ2V0Q1NSRlRva2VuKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdmFyIHJldHVybnZhbCA9ICc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJ1dGYtOFwiPz4nICtcbiAgICAgICAgICAgICAgICAnPGF0b206ZW50cnkgeG1sbnM6YXRvbSA9XCJodHRwOi8vd3d3LnczLm9yZy8yMDA1L0F0b21cIiB4bWxuczptPVwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9hZG8vMjAwNy8wOC9kYXRhc2VydmljZXMvbWV0YWRhdGFcIiB4bWxuczpkPVwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9hZG8vMjAwNy8wOC9kYXRhc2VydmljZXNcIiB4bWw6YmFzZT1cIicgKyBvUm91dGVQbGFuU3J2ICsgJ1wiPicgK1xuICAgICAgICAgICAgICAgICc8YXRvbTpjb250ZW50IHR5cGU9XCJhcHBsaWNhdGlvbi94bWxcIj4nICtcbiAgICAgICAgICAgICAgICAnPG06cHJvcGVydGllcz4nICtcbiAgICAgICAgICAgICAgICAnPGQ6UFJJTlRfTkFNRT4nICsgY3VzdG9tZXJOYW1lICsgJzwvZDpQUklOVF9OQU1FPicgK1xuICAgICAgICAgICAgICAgICc8ZDpTSUdOQVRVUkU+JyArIGN1c3RvbWVyU2lnbmF0dXJlICsgJzwvZDpTSUdOQVRVUkU+JyArXG4gICAgICAgICAgICAgICAgJzwvbTpwcm9wZXJ0aWVzPicgK1xuICAgICAgICAgICAgICAgICc8L2F0b206Y29udGVudD4nICtcbiAgICAgICAgICAgICAgICAnPGF0b206bGluayByZWw9XCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL2Fkby8yMDA3LzA4L2RhdGFzZXJ2aWNlcy9yZWxhdGVkL0ludHJuc2ZyX2lzXCIgdHlwZT1cImFwcGxpY2F0aW9uL2F0b20reG1sO3R5cGU9ZmVlZFwiIHRpdGxlPVwiWk1OS19NT0JJVE9SX1JPVVRFUExBTlNfU1JWLkludHJuc2ZyX2hfSW50cm5zZnJfaVwiPicgK1xuICAgICAgICAgICAgICAgICc8bTppbmxpbmU+JyArXG4gICAgICAgICAgICAgICAgJzxhdG9tOmZlZWQ+JztcblxuICAgICAgICAgICAgLy8gc3RhcnQgbG9vcFxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhT2JqQXJyLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhT2JqQXJyW2ldLkxpbmVObyk7XG5cbiAgICAgICAgICAgICAgICBsaW5lTm9GaXggPSBkYXRhT2JqQXJyW2ldLkxpbmVObztcblxuICAgICAgICAgICAgICAgIGlmIChsaW5lTm9GaXggPT0gXCJudWxsXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZU5vRml4ID0gXCIwMDAwXCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJudmFsICs9ICc8YXRvbTplbnRyeT4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxhdG9tOmNvbnRlbnQgdHlwZT1cImFwcGxpY2F0aW9uL3htbFwiPicgK1xuICAgICAgICAgICAgICAgICAgICAnPG06cHJvcGVydGllcz4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxkOkRPQ1VNRU5UX05VTUI+JyArIGRhdGFPYmpBcnJbaV0uRExQVSArICc8L2Q6RE9DVU1FTlRfTlVNQj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxkOkxJTkVfTlVNQj4nICsgbGluZU5vRml4ICsgJzwvZDpMSU5FX05VTUI+JyArXG4gICAgICAgICAgICAgICAgICAgICc8ZDpFTlRSWV9OVU1CIC8+JyArXG4gICAgICAgICAgICAgICAgICAgICc8ZDpTRVJJQUxfTlVNQj4nICsgKGRhdGFPYmpBcnJbaV0uU2VyaWFsTm8gPyBkYXRhT2JqQXJyW2ldLlNlcmlhbE5vIDogJycpICsgJzwvZDpTRVJJQUxfTlVNQj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxkOklURU1fTlVNQj4nICsgZGF0YU9iakFycltpXS5JdGVtICsgJzwvZDpJVEVNX05VTUI+JyArXG4gICAgICAgICAgICAgICAgICAgICc8ZDpRVUFOVElUWT4nICsgZGF0YU9iakFycltpXS5Ub3RhbFF1YW50aXR5ICsgJzwvZDpRVUFOVElUWT4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxkOlVOSVQ+JyArIChkYXRhT2JqQXJyW2ldLlVPTSA/IGRhdGFPYmpBcnJbaV0uVU9NIDogJ0VBJykgKyAnPC9kOlVOSVQ+JyArXG4gICAgICAgICAgICAgICAgICAgICc8ZDpESVNUX09SX05VTUI+JyArIG9yZGVyTm8gKyAnPC9kOkRJU1RfT1JfTlVNQj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxkOkxPVF9OVU1CPicgKyAoZGF0YU9iakFycltpXS5CYXRjaE5vID8gZGF0YU9iakFycltpXS5CYXRjaE5vIDogJycpICsgJzwvZDpMT1RfTlVNQj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxkOlBST0NFU1NFRD4xPC9kOlBST0NFU1NFRD4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxkOkhPVVJTPicgKyAoZGF0YU9iakFycltpXS5Ib3VycyA/IGRhdGFPYmpBcnJbaV0uSG91cnMgOiAnJykgKyAnPC9kOkhPVVJTPicgK1xuICAgICAgICAgICAgICAgICAgICAnPGQ6Uk9VVEVfTlVNQj4nICsgc3RvcmVPYmplY3Quc2VsZWN0ZWRSb3V0ZVBsYW5JZCArICc8L2Q6Uk9VVEVfTlVNQj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxkOlJPVVRFUExBTl9MSU5FPicgKyByb3V0ZVBsYW5MaW5lICsgJzwvZDpST1VURVBMQU5fTElORT4nICtcbiAgICAgICAgICAgICAgICAgICAgJzwvbTpwcm9wZXJ0aWVzPicgK1xuICAgICAgICAgICAgICAgICAgICAnPC9hdG9tOmNvbnRlbnQ+JyArXG4gICAgICAgICAgICAgICAgICAgICc8L2F0b206ZW50cnk+JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vZW5kIGxvb3BcblxuICAgICAgICAgICAgcmV0dXJudmFsICs9ICc8L2F0b206ZmVlZD4nICtcbiAgICAgICAgICAgICAgICAnPC9tOmlubGluZT4nICtcbiAgICAgICAgICAgICAgICAnPC9hdG9tOmxpbms+JyArXG4gICAgICAgICAgICAgICAgJzwvYXRvbTplbnRyeT4nO1xuXG4gICAgICAgICAgICB2YXIgcmVxdWVzdHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgcmVxdWVzdHJlcS5vcGVuKFwiUE9TVFwiLCBvSW5UcmFuc2ZlciwgdHJ1ZSk7XG4gICAgICAgICAgICByZXF1ZXN0cmVxLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICcqJyk7XG4gICAgICAgICAgICByZXF1ZXN0cmVxLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtbGVuZ3RoJywgcmV0dXJudmFsLmxlbmd0aCk7XG4gICAgICAgICAgICByZXF1ZXN0cmVxLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9hdG9tK3htbCcpO1xuICAgICAgICAgICAgcmVxdWVzdHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdBdXRob3JpemF0aW9uJywgc3RvcmVPYmplY3QuYXV0aCk7XG4gICAgICAgICAgICByZXF1ZXN0cmVxLnNldFJlcXVlc3RIZWFkZXIoJ1gtQ1NSRi1Ub2tlbicsIHN0b3JlT2JqZWN0LkNTUktleSk7XG4gICAgICAgICAgICByZXF1ZXN0cmVxLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9hdG9tK3htbCxhcHBsaWNhdGlvbi9hdG9tc3ZjK3htbCxhcHBsaWNhdGlvbi94bWwnKTtcbiAgICAgICAgICAgIHJlcXVlc3RyZXEudGltZW91dCA9IHN0b3JlT2JqZWN0Lm9EYXRhVGltZU91dDtcblxuICAgICAgICAgICAgcmVxdWVzdHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy9DYWxsIGEgZnVuY3Rpb24gd2hlbiB0aGUgc3RhdGUgY2hhbmdlcy5cblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVhZHkgU3RhdHVzIDpcIiArIHJlcXVlc3RyZXEucmVhZHlTdGF0ZSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZXF1ZXN0IFN0YXR1cyA6XCIgKyByZXF1ZXN0cmVxLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJyZXF1ZXN0IFVSTDpcIiArIG9JblRyYW5zZmVyKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInJlc3BvbnNlOlwiICsgcmVxdWVzdHJlcS5yZXNwb25zZVhNTCk7XG5cbiAgICAgICAgICAgICAgICBpZiAocmVxdWVzdHJlcS5yZWFkeVN0YXRlID09IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVlc3RyZXEuc3RhdHVzID09IDIwMCB8fCByZXF1ZXN0cmVxLnN0YXR1cyA9PSAyMDEgfHwgcmVxdWVzdHJlcS5zdGF0dXMgPT0gMjA0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhvSW5UcmFuc2Zlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkluVHJhbnNmZXIgVXBkYXRlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiUXVlcmllcy51cGRhdGVGbGFnKFwiVXBkYXRlIFN5bmNEZXRhaWxzIHNldCBJblRyYW5zZmVyRmxhZz0nMScgd2hlcmUgT3JkZXJObz0nXCIgKyBvcmRlck5vICsgXCInXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfSAvLyBpZiBlbmQgaGVyZVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXF1ZXN0cmVxLnN0YXR1cyA+PSA0MDAgfHwgcmVxdWVzdHJlcS5zdGF0dXMgPT0gMCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVuZCB3aXRoIEVycm9yIHVwZGF0ZUluVHJhbnNmZXJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZhaWxlZCBWYWx1ZTpcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXR1cm52YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgU2FwRGF0YS5VcGRhdGVFcnJvcihyZXF1ZXN0cmVxLnN0YXR1cyArIFwiIDogRW5kIHdpdGggRXJyb3IgdXBkYXRlSW5UcmFuc2ZlclwiKTtcblxuICAgICAgICAgICAgICAgICAgICB9IC8vIGVsc2UgaWYgZW5kIGhlcmVcbiAgICAgICAgICAgICAgICB9IC8vIGVuZCBvZiBpZiByZWFkeXN0YXRlXG4gICAgICAgICAgICB9OyAvLyByZWFkeSBzdGF0dXMgY2hhbmdlIEZ1bmN0aW9uIGVuZFxuXG5cbiAgICAgICAgICAgIC8vY29uc29sZS5sb2cocmV0dXJudmFsKTtcbiAgICAgICAgICAgIHJlcXVlc3RyZXEuc2VuZChyZXR1cm52YWwpO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgTmV0d29ya0Vycm9yOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjbG9naW5wb3B1cFwiKS5wb3B1cChcImNsb3NlXCIpO1xuICAgICAgICBuYXZpZ2F0b3Iubm90aWZpY2F0aW9uLmFsZXJ0KFwiTmV0d29yayBEb3duISBcXG4gUGxlYXNlIHRyeSBsYXRlclwiLCBmdW5jdGlvbiAoKSB7fSwgXCJFcnJvclwiKTtcbiAgICAgICAgLy9uYXZpZ2F0b3Iubm90aWZpY2F0aW9uLmJlZXAoMSk7XG4gICAgfSxcblxuXG4gICAgVXBkYXRlRXJyb3I6IGZ1bmN0aW9uIChlcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgJChcIiNwb3B1cExvYWRlclN5bmNBcHBcIikucG9wdXAoXCJjbG9zZVwiKTtcbiAgICAgICAgbmF2aWdhdG9yLm5vdGlmaWNhdGlvbi5hbGVydChcIlVuYWJsZSB0byBTeW5jIERhdGEhXFxuRGF0YSB3aWxsIGJlIHN5bmNlZCBhcyBzb29uIGFzIHdlIHJlY2VpdmUgY29ubmVjdGlvblwiLCBmdW5jdGlvbiAoKSB7fSwgZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgLy9uYXZpZ2F0b3Iubm90aWZpY2F0aW9uLmJlZXAoMSk7XG4gICAgfSxcblxuXG4gICAgbG9naW5FcnJvcjogZnVuY3Rpb24gKCkge1xuICAgICAgICBuYXZpZ2F0b3Iubm90aWZpY2F0aW9uLmFsZXJ0KFwiSW52YWxpZCBVc2VybmFtZSBvciBQYXNzd29yZFwiLCBmdW5jdGlvbiAoKSB7fSwgXCJMb2dpbiBFcnJvclwiKTtcbiAgICAgICAgbmF2aWdhdG9yLm5vdGlmaWNhdGlvbi5iZWVwKDEpO1xuXG4gICAgICAgICQoXCIjbG9naW5wb3B1cFwiKS5iaW5kKFwicG9wdXBhZnRlcmNsb3NlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vYWxlcnQoXCJMb2dpbiBlcnJvclwiKTtcbiAgICAgICAgICAgICQoXCIjbG9naW5wb3B1cFwiKS51bmJpbmQoXCJwb3B1cGFmdGVyY2xvc2VcIik7XG4gICAgICAgICAgICAkKFwiI3BvcHVwRGlhbG9nRW1wdHlMb2dpblwiKS5wb3B1cChcIm9wZW5cIik7XG4gICAgICAgICAgICAkKFwiI2xvZ2luRXJyb3JNc2dcIikuaHRtbChcIkludmFsaWQgVXNlcm5hbWUgb3IgUGFzc3dvcmQhXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgJChcIiNsb2dpbnBvcHVwXCIpLnBvcHVwKFwiY2xvc2VcIik7XG4gICAgfVxuXG59OyJdfQ==
