var IKMobileLogFile={logFilesAttachment:[],errorHandler:function(e){var o="";switch(e.code){case FileError.QUOTA_EXCEEDED_ERR:o="QUOTA_EXCEEDED_ERR";break;case FileError.NOT_FOUND_ERR:o="NOT_FOUND_ERR",IKMobileLogFile.errorAlert("File not found!");break;case FileError.SECURITY_ERR:o="SECURITY_ERR";break;case FileError.INVALID_MODIFICATION_ERR:o="INVALID_MODIFICATION_ERR";break;case FileError.INVALID_STATE_ERR:o="INVALID_STATE_ERR";break;default:o="Unknown Error",IKMobileLogFile.errorAlert(o)}console.log("Error: "+o)},clearLogFile:function(){window.requestFileSystem(3,0,function(e){e.root.getFile("console.log",{create:!1},function(e){e.createWriter(function(e){e.onwriteend=function(e){console.log("Write completed."),ErrorMessage("Delete Console File","Console Log has been removed!"),console.log("File removed.")},e.onerror=function(e){console.log("Write failed: "+e.toString())};var o=new Blob(["New Log"],{type:"text/plain"});e.write(o)},IKMobileLogFile.errorHandler)},IKMobileLogFile.errorHandler)})},getConsoleLogFile:function(){window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(e){console.log("we got file system access"),e.root.getFile("console.log",{},function(e){console.log("we got console file"),e.file(function(e){console.log("reading console file into binary");var o=new FileReader;o.onloadend=function(e){IKMobileLogFile.logFilesAttachment.push(e.target.result.replace("data:*/*;base64,","base64:console.log//")),IKMobileLogFile.sendLog(IKMobileLogFile.logFilesAttachment)},o.readAsDataURL(e)},IKMobileLogFile.errorHandler)},IKMobileLogFile.errorHandler)})},getDBFile:function(e){window.requestFileSystem(3,1,function(o){o.root.getFile(e,{},function(o){o.file(function(o){var l=new FileReader;l.onloadend=function(o){IKMobileLogFile.logFilesAttachment.push(o.target.result.replace("data:*/*;base64,","base64:"+e+"//")),IKMobileLogFile.getConsoleLogFile()},l.readAsDataURL(o)},IKMobileLogFile.errorHandler)},IKMobileLogFile.errorHandler)})},getDBFileName:function(){var e=function(o){var l=o.createReader();l.readEntries(function(o){var l,r="";for(l=0;l<o.length;l++)o[l].isDirectory===!0?"Caches"!=o[l].name&&"Cloud"!=o[l].name&&"Cookies"!=o[l].name&&"NoCloud"!=o[l].name&&"Preferences"!=o[l].name&&(console.log(o[l]),e(o[l])):o[l].fullPath.indexOf("/Library/WebKit/LocalStorage/file__0/")!=-1&&".db"==o[l].fullPath.substr(o[l].fullPath.length-3)&&(r=o[l],IKMobileLogFile.getDBFile("/WebKit/LocalStorage/file__0/"+r.name),console.log(r.name))},function(e){console.log("readEntries error: "+e.code+e.error)})};window.resolveLocalFileSystemURL(cordova.file.applicationStorageDirectory,e,this.errorHandler)},sendLog:function(e){cordova.plugins.email.isAvailable(function(o){o?cordova.plugins.email.open({subject:storeObject.loggedInUser.userId+" : "+storeObject.selectedRoutePlanId+" - iKmobile Console.Log & IKMobile.db file",attachments:e,body:"Please find log & DB file attached along with emil below:"},function(e){console.log("email "+(e?"sent":"cancelled"))},this):IKMobileLogFile.errorAlert("Email Account not setup!")})},errorAlert:function(e){navigator.notification.alert(e,function(){},"Error Message")}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ0ZpbGVTZXJ2aWNlLmpzIl0sIm5hbWVzIjpbIklLTW9iaWxlTG9nRmlsZSIsImxvZ0ZpbGVzQXR0YWNobWVudCIsImVycm9ySGFuZGxlciIsImUiLCJtc2ciLCJjb2RlIiwiRmlsZUVycm9yIiwiUVVPVEFfRVhDRUVERURfRVJSIiwiTk9UX0ZPVU5EX0VSUiIsImVycm9yQWxlcnQiLCJTRUNVUklUWV9FUlIiLCJJTlZBTElEX01PRElGSUNBVElPTl9FUlIiLCJJTlZBTElEX1NUQVRFX0VSUiIsImNvbnNvbGUiLCJsb2ciLCJjbGVhckxvZ0ZpbGUiLCJ3aW5kb3ciLCJyZXF1ZXN0RmlsZVN5c3RlbSIsImZzIiwicm9vdCIsImdldEZpbGUiLCJjcmVhdGUiLCJmaWxlRW50cnkiLCJjcmVhdGVXcml0ZXIiLCJmaWxlV3JpdGVyIiwib253cml0ZWVuZCIsIkVycm9yTWVzc2FnZSIsIm9uZXJyb3IiLCJ0b1N0cmluZyIsImJsb2IiLCJCbG9iIiwidHlwZSIsIndyaXRlIiwiZ2V0Q29uc29sZUxvZ0ZpbGUiLCJMb2NhbEZpbGVTeXN0ZW0iLCJQRVJTSVNURU5UIiwiZmlsZSIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJvbmxvYWRlbmQiLCJwdXNoIiwidGFyZ2V0IiwicmVzdWx0IiwicmVwbGFjZSIsInNlbmRMb2ciLCJyZWFkQXNEYXRhVVJMIiwiZ2V0REJGaWxlIiwiZGJGaWxlTmFtZSIsImdldERCRmlsZU5hbWUiLCJhZGRGaWxlRW50cnkiLCJlbnRyeSIsImRpclJlYWRlciIsImNyZWF0ZVJlYWRlciIsInJlYWRFbnRyaWVzIiwiZW50cmllcyIsImkiLCJmaWxlU3RyIiwibGVuZ3RoIiwiaXNEaXJlY3RvcnkiLCJuYW1lIiwiZnVsbFBhdGgiLCJpbmRleE9mIiwic3Vic3RyIiwiZXJyb3IiLCJyZXNvbHZlTG9jYWxGaWxlU3lzdGVtVVJMIiwiY29yZG92YSIsImFwcGxpY2F0aW9uU3RvcmFnZURpcmVjdG9yeSIsInRoaXMiLCJsb2dGaWxlcyIsInBsdWdpbnMiLCJlbWFpbCIsImlzQXZhaWxhYmxlIiwib3BlbiIsInN1YmplY3QiLCJzdG9yZU9iamVjdCIsImxvZ2dlZEluVXNlciIsInVzZXJJZCIsInNlbGVjdGVkUm91dGVQbGFuSWQiLCJhdHRhY2htZW50cyIsImJvZHkiLCJzZW50IiwiZXJyb3JNZXNzYWdlIiwibmF2aWdhdG9yIiwibm90aWZpY2F0aW9uIiwiYWxlcnQiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUlBLGtCQUNBQyxzQkFDQUMsYUFBYyxTQUFVQyxHQUNwQixHQUFJQyxHQUFNLEVBQ1YsUUFBUUQsRUFBRUUsTUFDTixJQUFLQyxXQUFVQyxtQkFDWEgsRUFBTSxvQkFDTixNQUNKLEtBQUtFLFdBQVVFLGNBQ1hKLEVBQU0sZ0JBQ0ZKLGdCQUFnQlMsV0FBVyxrQkFDL0IsTUFDSixLQUFLSCxXQUFVSSxhQUNYTixFQUFNLGNBQ04sTUFDSixLQUFLRSxXQUFVSyx5QkFDWFAsRUFBTSwwQkFDTixNQUNKLEtBQUtFLFdBQVVNLGtCQUNYUixFQUFNLG1CQUNOLE1BQ0osU0FDSUEsRUFBTSxnQkFDTkosZ0JBQWdCUyxXQUFXTCxHQUduQ1MsUUFBUUMsSUFBSSxVQUFZVixJQUU1QlcsYUFBYyxXQUNWQyxPQUFPQyxrQkFBa0IsRUFBRyxFQUN4QixTQUFTQyxHQUNSQSxFQUFHQyxLQUFLQyxRQUFRLGVBQWdCQyxRQUFRLEdBQVEsU0FBU0MsR0FFckRBLEVBQVVDLGFBQWEsU0FBU0MsR0FDN0JBLEVBQVdDLFdBQWEsU0FBU3RCLEdBQzdCVSxRQUFRQyxJQUFJLG9CQUNaWSxhQUFhLHNCQUFzQixpQ0FDbkNiLFFBQVFDLElBQUksa0JBR2hCVSxFQUFXRyxRQUFVLFNBQVN4QixHQUMxQlUsUUFBUUMsSUFBSSxpQkFBbUJYLEVBQUV5QixZQUlyQyxJQUFJQyxHQUFPLEdBQUlDLE9BQU0sWUFBYUMsS0FBTSxjQUV4Q1AsR0FBV1EsTUFBTUgsSUFFbEI3QixnQkFBZ0JFLGVBQ3BCRixnQkFBZ0JFLGlCQUszQitCLGtCQUFtQixXQUNmakIsT0FBT0Msa0JBQWtCaUIsZ0JBQWdCQyxXQUFZLEVBQ3BELFNBQVNqQixHQUNWTCxRQUFRQyxJQUFJLDZCQUNYSSxFQUFHQyxLQUFLQyxRQUFRLGlCQUFtQixTQUFTRSxHQUM1QlQsUUFBUUMsSUFBSSx1QkFDWlEsRUFBVWMsS0FDUCxTQUFTQSxHQUNMdkIsUUFBUUMsSUFBSSxtQ0FDWixJQUFJdUIsR0FBUyxHQUFJQyxXQUNqQkQsR0FBT0UsVUFBWSxTQUFTcEMsR0FDeEJILGdCQUFnQkMsbUJBQW1CdUMsS0FBS3JDLEVBQUVzQyxPQUFPQyxPQUFPQyxRQUFRLG1CQUFtQix5QkFFbkYzQyxnQkFBZ0I0QyxRQUFRNUMsZ0JBQWdCQyxxQkFFNUNvQyxFQUFPUSxjQUFjVCxJQUN0QnBDLGdCQUFnQkUsZUFDbkJGLGdCQUFnQkUsaUJBSXhDNEMsVUFBVyxTQUFTQyxHQUNoQi9CLE9BQU9DLGtCQUFrQixFQUFHLEVBQ0gsU0FBU0MsR0FDVEEsRUFBR0MsS0FBS0MsUUFBUTJCLEtBQ0EsU0FBU3pCLEdBQ1RBLEVBQVVjLEtBQ0ssU0FBU0EsR0FDVCxHQUFJQyxHQUFTLEdBQUlDLFdBQ2pCRCxHQUFPRSxVQUFZLFNBQVNwQyxHQUU1QkgsZ0JBQWdCQyxtQkFBbUJ1QyxLQUFLckMsRUFBRXNDLE9BQU9DLE9BQU9DLFFBQVEsbUJBQW1CLFVBQVlJLEVBQWEsT0FDNUcvQyxnQkFBZ0JpQyxxQkFHaEJJLEVBQU9RLGNBQWNULElBQ2xCcEMsZ0JBQWdCRSxlQUMvQkYsZ0JBQWdCRSxpQkFJaEU4QyxjQUFjLFdBQ04sR0FBSUMsR0FBZSxTQUFTQyxHQUV4QixHQUFJQyxHQUFZRCxFQUFNRSxjQUN0QkQsR0FBVUUsWUFDTixTQUFVQyxHQUNQLEdBQ0lDLEdBREFDLEVBQVUsRUFHZCxLQUFLRCxFQUFJLEVBQUdBLEVBQUlELEVBQVFHLE9BQVFGLElBQzNCRCxFQUFRQyxHQUFHRyxlQUFnQixFQUVJLFVBQWxCSixFQUFRQyxHQUFHSSxNQUFxQyxTQUFsQkwsRUFBUUMsR0FBR0ksTUFBb0MsV0FBbEJMLEVBQVFDLEdBQUdJLE1BQXNDLFdBQWxCTCxFQUFRQyxHQUFHSSxNQUFzQyxlQUFsQkwsRUFBUUMsR0FBR0ksT0FDdkk5QyxRQUFRQyxJQUFJd0MsRUFBUUMsSUFDaENOLEVBQWFLLEVBQVFDLEtBS2ZELEVBQVFDLEdBQUdLLFNBQVNDLFFBQVEsOENBQ29DLE9BQTdEUCxFQUFRQyxHQUFHSyxTQUFTRSxPQUFPUixFQUFRQyxHQUFHSyxTQUFTSCxPQUFTLEtBRzNERCxFQUFXRixFQUFRQyxHQUNuQnZELGdCQUFnQjhDLFVBQVUsZ0NBQWtDVSxFQUFRRyxNQUNwRTlDLFFBQVFDLElBQUkwQyxFQUFRRyxRQUs3QixTQUFVSSxHQUNUbEQsUUFBUUMsSUFBSSxzQkFBd0JpRCxFQUFNMUQsS0FBTzBELEVBQU1BLFNBSXRFL0MsUUFBT2dELDBCQUEwQkMsUUFBUTdCLEtBQUs4Qiw0QkFBNkJqQixFQUFla0IsS0FBS2pFLGVBR3BHMEMsUUFBUSxTQUFTd0IsR0FFYkgsUUFBUUksUUFBUUMsTUFBTUMsWUFDaEIsU0FBVUEsR0FDRkEsRUFFRk4sUUFBUUksUUFBUUMsTUFBTUUsTUFFckJDLFFBQVNDLFlBQVlDLGFBQWFDLE9BQVMsTUFBUUYsWUFBWUcsb0JBQXNCLDZDQUNyRkMsWUFBYVYsRUFDYlcsS0FBUyw2REFFUixTQUFTQyxHQUNQbkUsUUFBUUMsSUFBSSxVQUFZa0UsRUFBTyxPQUFTLGVBQzFDYixNQUdGbkUsZ0JBQWdCUyxXQUFXLCtCQU8zQ0EsV0FBVyxTQUFTd0UsR0FDaEJDLFVBQVVDLGFBQWFDLE1BQU1ILEVBQWMsYUFBYyIsImZpbGUiOiJsb2dGaWxlU2VydmljZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgSUtNb2JpbGVMb2dGaWxlID0gIHtcbiAgICBsb2dGaWxlc0F0dGFjaG1lbnQgOiBbXSxcbiAgICBlcnJvckhhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBtc2cgPSAnJztcbiAgICAgICAgc3dpdGNoIChlLmNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgRmlsZUVycm9yLlFVT1RBX0VYQ0VFREVEX0VSUjpcbiAgICAgICAgICAgICAgICBtc2cgPSAnUVVPVEFfRVhDRUVERURfRVJSJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRmlsZUVycm9yLk5PVF9GT1VORF9FUlI6XG4gICAgICAgICAgICAgICAgbXNnID0gJ05PVF9GT1VORF9FUlInO1xuICAgICAgICAgICAgICAgICAgICBJS01vYmlsZUxvZ0ZpbGUuZXJyb3JBbGVydChcIkZpbGUgbm90IGZvdW5kIVwiKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRmlsZUVycm9yLlNFQ1VSSVRZX0VSUjpcbiAgICAgICAgICAgICAgICBtc2cgPSAnU0VDVVJJVFlfRVJSJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRmlsZUVycm9yLklOVkFMSURfTU9ESUZJQ0FUSU9OX0VSUjpcbiAgICAgICAgICAgICAgICBtc2cgPSAnSU5WQUxJRF9NT0RJRklDQVRJT05fRVJSJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRmlsZUVycm9yLklOVkFMSURfU1RBVEVfRVJSOlxuICAgICAgICAgICAgICAgIG1zZyA9ICdJTlZBTElEX1NUQVRFX0VSUic7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIG1zZyA9ICdVbmtub3duIEVycm9yJztcbiAgICAgICAgICAgICAgICBJS01vYmlsZUxvZ0ZpbGUuZXJyb3JBbGVydChtc2cpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9O1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3I6ICcgKyBtc2cpO1xuICAgIH0sLy8gZW5kIG9mIGVycm9ySGFuZGxlciBmdW5jdGlvblxuICAgIGNsZWFyTG9nRmlsZTogZnVuY3Rpb24oKXtcbiAgICAgICAgd2luZG93LnJlcXVlc3RGaWxlU3lzdGVtKDMsIDAsXG4gICAgICAgICAgICBmdW5jdGlvbihmcykge1xuICAgICAgICAgICAgIGZzLnJvb3QuZ2V0RmlsZSgnY29uc29sZS5sb2cnLCB7Y3JlYXRlOiBmYWxzZX0sIGZ1bmN0aW9uKGZpbGVFbnRyeSkge1xuICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBGaWxlV3JpdGVyIG9iamVjdCBmb3Igb3VyIEZpbGVFbnRyeSAobG9nLnR4dCkuXG4gICAgICAgICAgICAgICAgIGZpbGVFbnRyeS5jcmVhdGVXcml0ZXIoZnVuY3Rpb24oZmlsZVdyaXRlcikge1xuICAgICAgICAgICAgICAgICAgICBmaWxlV3JpdGVyLm9ud3JpdGVlbmQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnV3JpdGUgY29tcGxldGVkLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgRXJyb3JNZXNzYWdlKFwiRGVsZXRlIENvbnNvbGUgRmlsZVwiLFwiQ29uc29sZSBMb2cgaGFzIGJlZW4gcmVtb3ZlZCFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRmlsZSByZW1vdmVkLicpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZmlsZVdyaXRlci5vbmVycm9yID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1dyaXRlIGZhaWxlZDogJyArIGUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgQmxvYiBhbmQgd3JpdGUgaXQgdG8gbG9nLnR4dC5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbJ05ldyBMb2cnXSwge3R5cGU6ICd0ZXh0L3BsYWluJ30pO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZmlsZVdyaXRlci53cml0ZShibG9iKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9LCBJS01vYmlsZUxvZ0ZpbGUuZXJyb3JIYW5kbGVyKTsgLy9maWxlIGVudHJ5IGNyZWF0ZSB3cml0ZXIgZW5kIGhlcmVcbiAgICAgICAgICAgIH0sIElLTW9iaWxlTG9nRmlsZS5lcnJvckhhbmRsZXIpOy8vZnMucm9vdCBmdW5jdGlvbiBoZXJlXG4gICAgICAgICAgfS8vIEZTIElGIEVuZCBIZXJlXG4gICAgICAgICk7Ly8gV2luZG93LlJlcXVlc3RGaWxlU3lzdGVtIEZ1bmN0aW9uIEVuZCBIZXJlXG4gICBcbiAgICB9LC8vIGVuZCBvZiBjbGVhckxvZ0ZpbGVcbiAgICBnZXRDb25zb2xlTG9nRmlsZTogZnVuY3Rpb24oKXtcbiAgICAgICAgd2luZG93LnJlcXVlc3RGaWxlU3lzdGVtKExvY2FsRmlsZVN5c3RlbS5QRVJTSVNURU5ULCAwLFxuICAgICAgICAgZnVuY3Rpb24oZnMpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJ3ZSBnb3QgZmlsZSBzeXN0ZW0gYWNjZXNzXCIpO1xuICAgICAgICAgZnMucm9vdC5nZXRGaWxlKCdjb25zb2xlLmxvZycsIHt9LCBmdW5jdGlvbihmaWxlRW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIndlIGdvdCBjb25zb2xlIGZpbGVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUVudHJ5LmZpbGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInJlYWRpbmcgY29uc29sZSBmaWxlIGludG8gYmluYXJ5XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElLTW9iaWxlTG9nRmlsZS5sb2dGaWxlc0F0dGFjaG1lbnQucHVzaChlLnRhcmdldC5yZXN1bHQucmVwbGFjZSgnZGF0YToqLyo7YmFzZTY0LCcsJ2Jhc2U2NDpjb25zb2xlLmxvZy8vJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZS50YXJnZXQucmVzdWx0LnJlcGxhY2UoJ2RhdGE6Ki8qO2Jhc2U2NCwnLCdiYXNlNjQ6Y29uc29sZS5sb2cvLycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElLTW9iaWxlTG9nRmlsZS5zZW5kTG9nKElLTW9iaWxlTG9nRmlsZS5sb2dGaWxlc0F0dGFjaG1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBJS01vYmlsZUxvZ0ZpbGUuZXJyb3JIYW5kbGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICB9LCBJS01vYmlsZUxvZ0ZpbGUuZXJyb3JIYW5kbGVyKTsvL2ZzLnJvb3QgZnVuY3Rpb24gaGVyZVxuICAgICAgICAgfS8vIEZTIElGIEVuZCBIZXJlXG4gICAgICAgICApOy8vIFdpbmRvdy5SZXF1ZXN0RmlsZVN5c3RlbSBGdW5jdGlvbiBFbmQgSGVyZVxuICAgIH0sLy9lbmQgb2YgZ2V0Q29uc29sZUxvZ0ZpbGVcbiAgICBnZXREQkZpbGU6IGZ1bmN0aW9uKGRiRmlsZU5hbWUpe1xuICAgICAgICB3aW5kb3cucmVxdWVzdEZpbGVTeXN0ZW0oMywgMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGZzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcy5yb290LmdldEZpbGUoZGJGaWxlTmFtZSwge30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZmlsZUVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUVudHJ5LmZpbGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9JS01vYmlsZUxvZ0ZpbGUubG9nRmlsZXNBdHRhY2htZW50ID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSUtNb2JpbGVMb2dGaWxlLmxvZ0ZpbGVzQXR0YWNobWVudC5wdXNoKGUudGFyZ2V0LnJlc3VsdC5yZXBsYWNlKCdkYXRhOiovKjtiYXNlNjQsJywnYmFzZTY0OicgKyBkYkZpbGVOYW1lICsgJy8vJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElLTW9iaWxlTG9nRmlsZS5nZXRDb25zb2xlTG9nRmlsZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBJS01vYmlsZUxvZ0ZpbGUuZXJyb3JIYW5kbGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBJS01vYmlsZUxvZ0ZpbGUuZXJyb3JIYW5kbGVyKTsvL2ZzLnJvb3QgZnVuY3Rpb24gaGVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfS8vIEZTIElGIEVuZCBIZXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOy8vIFdpbmRvdy5SZXF1ZXN0RmlsZVN5c3RlbSBGdW5jdGlvbiBFbmQgSGVyZVxuICAgIH0sLy9lbmQgb2YgZ2V0REJGaWxlXG4gICAgZ2V0REJGaWxlTmFtZTpmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIGFkZEZpbGVFbnRyeSA9IGZ1bmN0aW9uKGVudHJ5KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciBkaXJSZWFkZXIgPSBlbnRyeS5jcmVhdGVSZWFkZXIoKTtcbiAgICAgICAgICAgICAgICBkaXJSZWFkZXIucmVhZEVudHJpZXMoXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlbnRyaWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlU3RyID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZW50cmllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJpZXNbaV0uaXNEaXJlY3RvcnkgPT09IHRydWUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlY3Vyc2l2ZSAtLSBjYWxsIGJhY2sgaW50byB0aGlzIHN1YmRpcmVjdG9yeVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlbnRyaWVzW2ldLm5hbWUgIT1cIkNhY2hlc1wiICYmIGVudHJpZXNbaV0ubmFtZSAhPVwiQ2xvdWRcIiAmJiBlbnRyaWVzW2ldLm5hbWUgIT1cIkNvb2tpZXNcIiAmJiBlbnRyaWVzW2ldLm5hbWUgIT1cIk5vQ2xvdWRcIiAmJiBlbnRyaWVzW2ldLm5hbWUgIT1cIlByZWZlcmVuY2VzXCIgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZW50cmllc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZpbGVFbnRyeShlbnRyaWVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbnRyaWVzW2ldLmZ1bGxQYXRoLmluZGV4T2YoXCIvTGlicmFyeS9XZWJLaXQvTG9jYWxTdG9yYWdlL2ZpbGVfXzAvXCIpICE9IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGVudHJpZXNbaV0uZnVsbFBhdGguc3Vic3RyKGVudHJpZXNbaV0uZnVsbFBhdGgubGVuZ3RoIC0gMyk9PSBcIi5kYlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8mJiBlbnRyaWVzW2ldLmZ1bGxQYXRoLmluZGV4T2YoXCIuZGJcIikgIT0gLTEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlU3RyID0gKGVudHJpZXNbaV0pOyAvLyA8PCByZXBsYWNlIHdpdGggc29tZXRoaW5nIHVzZWZ1bFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJS01vYmlsZUxvZ0ZpbGUuZ2V0REJGaWxlKFwiL1dlYktpdC9Mb2NhbFN0b3JhZ2UvZmlsZV9fMC9cIiArIGZpbGVTdHIubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGVTdHIubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9Ly8gZm9yIGxvb3AgZW5kIGhlcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVhZEVudHJpZXMgZXJyb3I6IFwiICsgZXJyb3IuY29kZSArIGVycm9yLmVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7Ly8gZGlyUmVhZGVyIGVuZCBoZXJlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgd2luZG93LnJlc29sdmVMb2NhbEZpbGVTeXN0ZW1VUkwoY29yZG92YS5maWxlLmFwcGxpY2F0aW9uU3RvcmFnZURpcmVjdG9yeSwgYWRkRmlsZUVudHJ5ICwgdGhpcy5lcnJvckhhbmRsZXIpOyAvLyBlbmQgb2Ygd2luZG93LnJlc29sdmVMb2NhbEZpbGVTeXN0ZW1VUkxcbiAgICAgICAgXG4gICAgfSwvL2VuZCBvZiBnZXREQkZpbGVOYW1lXG4gICAgc2VuZExvZzpmdW5jdGlvbihsb2dGaWxlcyl7XG4gICAgICAgIFxuICAgICAgICBjb3Jkb3ZhLnBsdWdpbnMuZW1haWwuaXNBdmFpbGFibGUoXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIChpc0F2YWlsYWJsZSkge1xuICAgICAgICAgICAgICAgICAgaWYgKGlzQXZhaWxhYmxlKVxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb3Jkb3ZhLnBsdWdpbnMuZW1haWwub3BlbihcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgc3ViamVjdDogc3RvcmVPYmplY3QubG9nZ2VkSW5Vc2VyLnVzZXJJZCArICcgOiAnICsgc3RvcmVPYmplY3Quc2VsZWN0ZWRSb3V0ZVBsYW5JZCArICcgLSBpS21vYmlsZSBDb25zb2xlLkxvZyAmIElLTW9iaWxlLmRiIGZpbGUnLFxuICAgICAgICAgICAgICAgICAgICAgYXR0YWNobWVudHM6IGxvZ0ZpbGVzLFxuICAgICAgICAgICAgICAgICAgICAgYm9keTogICAgJ1BsZWFzZSBmaW5kIGxvZyAmIERCIGZpbGUgYXR0YWNoZWQgYWxvbmcgd2l0aCBlbWlsIGJlbG93OidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uKHNlbnQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VtYWlsICcgKyAoc2VudCA/ICdzZW50JyA6ICdjYW5jZWxsZWQnKSk7XG4gICAgICAgICAgICAgICAgICAgIH0sdGhpcyk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICBJS01vYmlsZUxvZ0ZpbGUuZXJyb3JBbGVydCgnRW1haWwgQWNjb3VudCBub3Qgc2V0dXAhJyk7XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICBcbiAgICB9LC8vZW5kIG9mIFNlbmRMb2cgbWVzc2FnZVxuICAgIGVycm9yQWxlcnQ6ZnVuY3Rpb24oZXJyb3JNZXNzYWdlKXtcbiAgICAgICAgbmF2aWdhdG9yLm5vdGlmaWNhdGlvbi5hbGVydChlcnJvck1lc3NhZ2UsIGZ1bmN0aW9uKCl7fSwgXCJFcnJvciBNZXNzYWdlXCIpO1xuICAgICAgICAvL25hdmlnYXRvci5ub3RpZmljYXRpb24uYmVlcCgxKTtcbiAgICB9XG59XG4iXX0=
